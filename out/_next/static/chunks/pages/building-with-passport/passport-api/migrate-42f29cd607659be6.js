(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6],{9079:function(i,s,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/building-with-passport/passport-api/migrate",function(){return e(7095)}])},7095:function(i,s,e){"use strict";e.r(s),e.d(s,{useTOC:function(){return useTOC}});var n=e(1527),r=e(4859),d=e(4243),h=e(2816);function useTOC(i){return[{value:"Key changes to address",id:"key-changes-to-address",depth:2},{value:"The base URL",id:"the-base-url",depth:2},{value:"Simplified score retrieval",id:"simplified-score-retrieval",depth:2},{value:"Background",id:"background",depth:3},{value:"What’s new in v2",id:"whats-new-in-v2",depth:3},{value:"Endpoint changes",id:"endpoint-changes",depth:3},{value:"Updated endpoint URIs",id:"updated-endpoint-uris",depth:2},{value:"Endpoint mapping",id:"endpoint-mapping",depth:3},{value:"Accessing historical data",id:"accessing-historical-data",depth:2},{value:"New Feature in V2",id:"new-feature-in-v2",depth:3},{value:"Unified Scorer types",id:"unified-scorer-types",depth:2},{value:"Background",id:"background-1",depth:3},{value:"What’s New in V2",id:"whats-new-in-v2-1",depth:3},{value:"Example v2 Payload",id:"example-v2-payload",depth:3},{value:"Additional Stamp data in score payload",id:"additional-stamp-data-in-score-payload",depth:2},{value:"Deduplication field",id:"deduplication-field",depth:3},{value:"Example",id:"example",depth:4},{value:"Stamp expiration date",id:"stamp-expiration-date",depth:3},{value:"Next Steps Checklist",id:"next-steps-checklist",depth:2}]}function MDXLayout(i){let{toc:s=useTOC(i)}=i,e={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",mark:"mark",ol:"ol",p:"p",pre:"pre",span:"span",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,h.a)(),...i.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.h1,{children:"Passport API v2 migration guide"}),"\n",(0,n.jsx)(e.p,{children:"Migrating to Passport API V2 is designed to be straightforward. This guide outlines the key changes and provides step-by-step instructions to help you update your integration smoothly."}),"\n",(0,n.jsx)(e.p,{children:"But first, why should you migrate?"}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsx)(e.li,{children:"Retrieve user scores with a single, intuitive GET request."}),"\n",(0,n.jsx)(e.li,{children:"Utilize new endpoints to access historical scores and Stamp data."}),"\n",(0,n.jsx)(e.li,{children:"Gain access to more data to proactively prevent and resolve misunderstandings."}),"\n",(0,n.jsx)(e.li,{children:"Retrieve both binary and numeric scores within the same payload"}),"\n",(0,n.jsx)(e.li,{children:"Benefit from a more unified API endpoint URI structure."}),"\n"]}),"\n",(0,n.jsxs)(e.p,{children:["If you’d prefer to learn by doing, please visit our ",(0,n.jsx)(e.a,{href:"https://api.passport.xyz/v2/docs",children:"API playground"})," to see the changes in action.\nIf you’d prefer to learn via our reference docs, please visit our ",(0,n.jsx)(e.a,{href:"api-reference",children:"API reference"}),"."]}),"\n",(0,n.jsx)(e.h2,{id:s[0].id,children:s[0].value}),"\n",(0,n.jsxs)(e.ol,{children:["\n",(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:"#the-base-url",children:"The base URL"})}),"\n",(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:"#simplified-score-retrieval",children:"Simplified score retrieval"})}),"\n",(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:"#updated-endpoint-uris",children:"Updated endpoint URIs"})}),"\n",(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:"#accessing-historical-data",children:"Accessing historical data"})}),"\n",(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:"#unified-scorer-types",children:"Unified Scorer types"})}),"\n",(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:"#additional-stamp-data-in-score-payload",children:"Additional Stamp data in score payload"})}),"\n"]}),"\n",(0,n.jsx)(e.h2,{id:s[1].id,children:s[1].value}),"\n",(0,n.jsx)(e.p,{children:"In August 2024, the Passport workstream spun out of Gitcoin."}),"\n",(0,n.jsx)(e.p,{children:"We have been working on separating our infrastructure from Gitcoin, and the API base URL is finally getting its update."}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsxs)(e.li,{children:["Previous Base URL: ",(0,n.jsx)(e.a,{href:"https://api.passport.gitcoin.co",children:"https://api.passport.gitcoin.co"})]}),"\n",(0,n.jsxs)(e.li,{children:["New Base URL: ",(0,n.jsx)(e.a,{href:"https://api.passport.xyz",children:"https://api.passport.xyz"})]}),"\n"]}),"\n",(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:"Action Required:"})," Update all instances of the base URL in your application to the new URL."]}),"\n",(0,n.jsx)(e.h2,{id:s[2].id,children:s[2].value}),"\n",(0,n.jsx)(e.h3,{id:s[3].id,children:s[3].value}),"\n",(0,n.jsx)(e.p,{children:"In V1, retrieving a user’s score involved:"}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsx)(e.li,{children:"Submitting the Passport for scoring using a POST request."}),"\n",(0,n.jsx)(e.li,{children:"Retrieving the score using a GET request."}),"\n"]}),"\n",(0,n.jsx)(e.p,{children:"This process was counterintuitive and could lead to confusion and stale scores if only the GET endpoint was used."}),"\n",(0,n.jsx)(e.h3,{id:s[4].id,children:s[4].value}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:"Single GET Request:"})," Retrieve the latest score and Stamp data with one GET request."]}),"\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:"No POST Required:"})," Eliminates the need to submit the Passport for scoring."]}),"\n"]}),"\n",(0,n.jsx)(e.h3,{id:s[5].id,children:s[5].value}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:"From V1:"})," ",(0,n.jsx)(e.code,{children:"POST /registry/submit-passport"})]}),"\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:"To V2:"})," ",(0,n.jsx)(e.code,{children:"GET /v2/stamps/{scorer_id}/score/{address}"})]}),"\n"]}),"\n",(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:"Action Required:"})," Replace any ",(0,n.jsx)(e.code,{children:"POST /registry/submit-passport"})," requests with GET requests to the new endpoint."]}),"\n",(0,n.jsx)(e.h2,{id:s[6].id,children:s[6].value}),"\n",(0,n.jsx)(e.p,{children:"We’ve adopted a more consistent, object-oriented design for our API endpoints."}),"\n",(0,n.jsx)(e.h3,{id:s[7].id,children:s[7].value}),"\n",(0,n.jsxs)(e.table,{children:[(0,n.jsx)(e.thead,{children:(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.th,{children:"From v1"}),(0,n.jsx)(e.th,{children:"To v2"})]})}),(0,n.jsxs)(e.tbody,{children:[(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:(0,n.jsx)(e.code,{children:"GET /registry/score/{scorer_id}/{address}"})}),(0,n.jsx)(e.td,{children:(0,n.jsx)(e.code,{children:"GET /v2/stamps/{scorer_id}/score/{address}"})})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:(0,n.jsx)(e.em,{children:"New to v2"})}),(0,n.jsx)(e.td,{children:(0,n.jsx)(e.code,{children:"GET /v2/stamps/{scorer_id}/score/{address}/history"})})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:(0,n.jsx)(e.code,{children:"GET /registry/stamps/{address}"})}),(0,n.jsx)(e.td,{children:(0,n.jsx)(e.code,{children:"GET /v2/stamps/{address}"})})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:(0,n.jsx)(e.code,{children:"GET /registry/stamp-metadata"})}),(0,n.jsx)(e.td,{children:(0,n.jsx)(e.code,{children:"GET /v2/stamps/metadata"})})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:(0,n.jsx)(e.code,{children:"GET /passport/analysis/{address}"})}),(0,n.jsx)(e.td,{children:(0,n.jsx)(e.code,{children:"GET /v2/models/score/{address}"})})]})]})]}),"\n",(0,n.jsx)(e.h2,{id:s[8].id,children:s[8].value}),"\n",(0,n.jsx)(e.h3,{id:s[9].id,children:s[9].value}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:"Endpoint:"})," GET /v2/stamps/{scorer_id}/score/{address}/history"]}),"\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:"Functionality:"})," Retrieve a user’s score and Stamp data from a specific date and time."]}),"\n"]}),"\n",(0,n.jsx)(e.p,{children:"Note: Access to this endpoint requires your API key to be allowlisted."}),"\n",(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:"Action Required for use:"})}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:"Request Access:"})," Fill out the ",(0,n.jsx)(e.a,{href:"https://forms.gle/4GyicBfhtHW29eEu8",children:"access request form"})," to have your API key allowlisted."]}),"\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:"Update Implementation:"})," Incorporate the new endpoint into your application if you need historical data."]}),"\n"]}),"\n",(0,n.jsx)(e.h2,{id:s[10].id,children:s[10].value}),"\n",(0,n.jsx)(e.h3,{id:s[11].id,children:s[11].value}),"\n",(0,n.jsx)(e.p,{children:"In V1, you had to choose between two Scorer types:"}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsx)(e.li,{children:"Unique Humanity"}),"\n",(0,n.jsx)(e.li,{children:"Unique Humanity: Binary"}),"\n"]}),"\n",(0,n.jsx)(e.p,{children:"This differentiation added complexity and could lead to confusion."}),"\n",(0,n.jsx)(e.h3,{id:s[12].id,children:s[12].value}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:"Unified Scoring:"})," Both numeric and binary scores are included in all payloads."]}),"\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:"Simplified Choices:"})," No need to choose a Scorer type; you can use the score that best fits your application."]}),"\n"]}),"\n",(0,n.jsx)(e.h3,{id:s[13].id,children:s[13].value}),"\n",(0,n.jsx)(e.pre,{tabIndex:"0","data-language":"json","data-word-wrap":"","data-filename":"Sample response","data-copy":"",children:(0,n.jsxs)(e.code,{children:[(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"{"})}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:'  "address"'}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'"0x9c4de275772297e8fd4c458e6844f4e92ac82b74"'}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,n.jsxs)(e.span,{"data-highlighted-line":"",children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:'  "score"'}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'"31.885"'}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,n.jsxs)(e.span,{"data-highlighted-line":"",children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:'  "passing_score"'}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"true"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,n.jsxs)(e.span,{"data-highlighted-line":"",children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:'  "threshold"'}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'"20"'}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:'  "last_score_timestamp"'}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'"2024-12-02T22:21:25.723470+00:00"'}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:'  "expiration_timestamp"'}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'"2025-01-05T20:29:44.441000+00:00"'}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:'  "error"'}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"null"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:'  "stamps"'}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": {"})]}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:'    "Discord"'}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": {"})]}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:'      "score"'}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'"0"'}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:'      "dedup"'}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"true"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:'      "expiration_date"'}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'"2025-2-05T03:25:24.321000+00:00"'})]}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"    },"})}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:'    "Ens"'}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": {"})]}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:'      "score"'}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'"0.408"'}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:'      "dedup"'}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"false"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:'      "expiration_date"'}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'"2025-01-05T20:29:44.441000+00:00"'})]}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"    }"})}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"  }"})}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"}"})})]})}),"\n",(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:"Action Required:"})," Adjust your application’s logic to handle the new payload structure and use the appropriate score type."]}),"\n",(0,n.jsx)(e.h2,{id:s[14].id,children:s[14].value}),"\n",(0,n.jsx)(e.h3,{id:s[15].id,children:s[15].value}),"\n",(0,n.jsxs)(e.p,{children:["To prevent multiple Passports from verifying the same credential (enhancing security against Sybil attacks), Stamps are ",(0,n.jsx)(e.a,{href:"../major-concepts/deduplicating-stamps",children:"deduplicated"})," across addresses."]}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:"New Field:"})," ",(0,n.jsx)(e.code,{children:"dedup"})]}),"\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:"Purpose:"})," Indicates whether a Stamp has been deduplicated and thus does not contribute to the score."]}),"\n"]}),"\n",(0,n.jsx)(e.h4,{id:s[16].id,children:s[16].value}),"\n",(0,n.jsx)(e.pre,{tabIndex:"0","data-language":"json","data-word-wrap":"","data-copy":"",children:(0,n.jsxs)(e.code,{children:[(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'"stamps"'}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": {"})]}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:'  "Discord"'}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": {"})]}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:'    "score"'}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'"0"'}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:'    "'}),(0,n.jsx)(e.mark,{"data-highlighted-chars":"",children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"dedup"})}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:'"'}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"true"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:'    "expiration_date"'}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'"<alt_date>"'})]}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"  },"})}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:'  "Ens"'}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": {"})]}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:'    "score"'}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'"0.408"'}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:'    "'}),(0,n.jsx)(e.mark,{"data-highlighted-chars":"",children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"dedup"})}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:'"'}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"false"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:'    "expiration_date"'}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'"<date>"'})]}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"  }"})}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"}"})})]})}),"\n",(0,n.jsxs)(e.p,{children:["In the above example, you’ll notice that the Discord Stamp is ",(0,n.jsx)(e.a,{href:"../major-concepts/deduplicating-stamps",children:"deduplicated"}),", meaning another address has also verified this same credential. As a result, the user received a 0 score for that Stamp. You will also note that a different expiration date returns when ",(0,n.jsx)(e.code,{children:"dedup=true"}),". This date represents when the credential verified by the other address will expire, rather than when this credential will expire."]}),"\n",(0,n.jsx)(e.p,{children:"You will also see that the ENS Stamp was not deduplicated, meaning the 0.408 score was included in the user’s overall unique humanity score."}),"\n",(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:"Action Required:"})}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:"Handle Deduplication:"})," Update your application to interpret the dedup field and inform users if their Stamps are affected."]}),"\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:"User Communication:"})," Consider displaying warnings to users about deduplicated Stamps."]}),"\n"]}),"\n",(0,n.jsx)(e.h3,{id:s[17].id,children:s[17].value}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:"New Field:"})," ",(0,n.jsx)(e.code,{children:"expiration_date"})," for each credential."]}),"\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:"Purpose:"})," Indicates when each specific Stamp will expire."]}),"\n"]}),"\n",(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:"Action required:"})}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:"Monitor Expirations:"})," Use the ",(0,n.jsx)(e.code,{children:"expiration_date"})," to notify users about upcoming Stamp expirations."]}),"\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:"Update Logic:"})," Ensure your application considers Stamp expiration dates in its functionality."]}),"\n"]}),"\n",(0,n.jsx)(e.h2,{id:s[18].id,children:s[18].value}),"\n",(0,n.jsxs)(e.ol,{children:["\n",(0,n.jsxs)(e.li,{children:["Update Base URL to ",(0,n.jsx)(e.a,{href:"https://api.passport.xyz",children:"https://api.passport.xyz"}),"."]}),"\n",(0,n.jsx)(e.li,{children:"Modify all API endpoint URIs to the new V2 structure."}),"\n",(0,n.jsx)(e.li,{children:"Replace POST requests with GET requests for score retrieval."}),"\n",(0,n.jsxs)(e.li,{children:["Update your data models and logic to accommodate new fields (",(0,n.jsx)(e.code,{children:"passing_score"}),", ",(0,n.jsx)(e.code,{children:"dedup"}),", ",(0,n.jsx)(e.code,{children:"expiration_date"}),")."]}),"\n",(0,n.jsx)(e.li,{children:"If needed, submit the access request form for the historical endpoint and build it into your integration."}),"\n",(0,n.jsx)(e.li,{children:"Thoroughly test your application to ensure all changes work as expected."}),"\n"]}),"\n",(0,n.jsxs)(e.p,{children:["If you have questions or need support, you can chat with us on our ",(0,n.jsx)(e.a,{href:"https://t.me/+Mcp9RsRV7tVmYjZh",children:"developer support channel on Telegram"}),"."]})]})}s.default=(0,r.c)(MDXLayout,"/building-with-passport/passport-api/migrate",{filePath:"pages/building-with-passport/passport-api/migrate.mdx",timestamp:1742593489e3,pageMap:d.v,frontMatter:{title:"Passport API migration guide",description:"This guide explains the differences between v1 and v2 of the Passport API"},title:"Passport API migration guide"},"undefined"==typeof RemoteContent?useTOC:RemoteContent.useTOC)}},function(i){i.O(0,[4859,4243,9774,2888,179],function(){return i(i.s=9079)}),_N_E=i.O()}]);
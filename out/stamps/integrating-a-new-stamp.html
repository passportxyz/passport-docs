<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="theme-color" content="#111" media="(prefers-color-scheme: dark)"/><meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover"/><style>:root{--nextra-primary-hue:212deg;--nextra-primary-saturation:100%;--nextra-primary-lightness:45%;--nextra-navbar-height:64px;--nextra-menu-height:3.75rem;--nextra-banner-height:2.5rem;--nextra-bg:250,250,250;}.dark{--nextra-primary-hue:204deg;--nextra-primary-saturation:100%;--nextra-primary-lightness:55%;--nextra-bg:17,17,17;}</style><meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Submitting a Stamp pull request"/><meta name="twitter:description" content="Human Passport — Sybil Defense. Made Simple"/><meta name="twitter:site" content="@humnpassport"/><meta name="twitter:image" content="https://docs.passport.xyz/social-card.png"/><meta property="og:url" content="https://docs.passport.xyz/stamps/integrating-a-new-stamp"/><meta property="og:title" content="Submitting a Stamp pull request"/><meta property="og:description" content="Human Passport — Sybil Defense. Made Simple"/><meta name="og:image" content="https://docs.passport.xyz/social-card.png"/><link rel="icon" href="/favicon.svg" type="image/svg+xml"/><link rel="icon" href="/favicon.png" type="image/png"/><meta name="next-seo-version" content="3.2.3"/><meta name="next-head-count" content="16"/><link rel="preload" href="/_next/static/css/1a5b68d8e692e721.css" as="style" crossorigin=""/><link rel="stylesheet" href="/_next/static/css/1a5b68d8e692e721.css" crossorigin="" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" crossorigin="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-2f491faf6934894c.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/framework-44787edd1b06cb22.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/main-2f2be1de51c1b592.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/pages/_app-2fd18b36925e8698.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/4859-b1cac6a2395f5475.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/4243-b47c0015a58bd974.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/pages/stamps/integrating-a-new-stamp-439e9aca30aad793.js" defer="" crossorigin=""></script><script src="/_next/static/ovyyKbC8XDk3XIs6f5W7D/_buildManifest.js" defer="" crossorigin=""></script><script src="/_next/static/ovyyKbC8XDk3XIs6f5W7D/_ssgManifest.js" defer="" crossorigin=""></script></head><body><div id="__next"><script>((k,B,q,X,Y,ee,er,en)=>{let eo=document.documentElement,ei=["light","dark"];function p(B){(Array.isArray(k)?k:[k]).forEach(k=>{let q="class"===k,X=q&&ee?Y.map(k=>ee[k]||k):Y;q?(eo.classList.remove(...X),eo.classList.add(ee&&ee[B]?ee[B]:B)):eo.setAttribute(k,B)}),R(B)}function R(k){en&&ei.includes(k)&&(eo.style.colorScheme=k)}function c(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(X)p(X);else try{let k=localStorage.getItem(B)||q,X=er&&"system"===k?c():k;p(X)}catch(k){}})("class","theme","system",null,["light","dark"],null,true,true)</script><div dir="ltr"><script>document.documentElement.setAttribute('dir','ltr')</script><div class="nextra-nav-container _sticky _top-0 _z-20 _w-full _bg-transparent print:_hidden"><div class="nextra-nav-container-blur"></div><nav class="_mx-auto _flex _h-[var(--nextra-navbar-height)] _max-w-[90rem] _items-center _justify-end _gap-4 _pl-[max(env(safe-area-inset-left),1.5rem)] _pr-[max(env(safe-area-inset-right),1.5rem)]"><a class="nextra-focus _flex _items-center hover:_opacity-75 ltr:_mr-auto rtl:_ml-auto" href="/"><div style="height:40px;display:flex;gap:8px;align-items:end"><svg width="170" height="40" viewBox="0 0 267 68" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M93.5488 14.4387C96.34 14.4387 98.7299 15.5035 100.719 17.6331C102.707 19.7626 103.702 22.2383 103.702 25.0567C103.702 27.875 102.707 30.3947 100.719 32.5154C98.7299 34.638 96.34 35.6992 93.5488 35.6992H82.0708V51.3372H78.7024V14.4387H93.5488ZM93.357 32.8405C95.3615 32.8405 97.0774 32.0762 98.5064 30.5458C99.9337 29.0171 100.648 27.2021 100.648 25.1041C100.648 23.0062 99.9266 21.2368 98.4835 19.6994C97.0404 18.1619 95.3316 17.3941 93.3587 17.3941H82.0708V32.8405H93.3552H93.357Z" fill="currentColor"></path><path d="M114.145 51.5287C111.546 51.5287 109.384 50.7925 107.66 49.3183C105.935 47.8459 105.073 45.9798 105.073 43.7203C105.073 38.3717 108.802 35.448 116.26 34.9525L123.31 34.5202V33.4871C123.31 31.3259 122.661 29.676 121.362 28.5392C120.063 27.4024 118.282 26.8331 116.021 26.8331C114.048 26.8331 112.44 27.3901 111.197 28.5023C109.955 29.6163 109.228 31.029 109.02 32.7421H105.676C105.933 30.2752 106.968 28.1825 108.781 26.4606C110.594 24.7386 113.056 23.8777 116.167 23.8777C119.279 23.8777 121.922 24.7545 123.757 26.508C125.595 28.2616 126.512 30.6354 126.512 33.6312L126.559 44.706C126.559 46.1468 126.707 47.1518 127.004 47.7211C127.302 48.2904 127.811 48.5575 128.532 48.5258V51.3371C128.034 51.3371 127.578 51.2897 127.161 51.1931C124.931 50.7292 123.712 49.3675 123.504 47.1096C122.783 48.3589 121.551 49.4079 119.81 50.2566C118.07 51.1052 116.181 51.5304 114.143 51.5304L114.145 51.5287ZM114.289 48.5258C116.614 48.5258 118.7 47.8213 120.546 46.4121C122.39 45.0029 123.312 43.3776 123.312 41.5362V37.4528L116.262 37.9571C113.246 38.1486 111.153 38.7618 109.983 39.795C108.813 40.8281 108.226 42.153 108.226 43.7712C108.226 45.212 108.844 46.3664 110.08 47.2309C111.315 48.0954 112.718 48.5276 114.291 48.5276L114.289 48.5258Z" fill="currentColor"></path><path d="M141.526 51.7692C138.27 51.7692 135.771 50.924 134.03 49.2355C132.29 47.5452 131.355 45.6915 131.227 43.6744H134.331C134.523 44.9869 135.313 46.208 136.702 47.3378C138.089 48.4676 139.701 49.0317 141.538 49.0317C143.375 49.0317 144.919 48.5309 146.17 47.5311C147.421 46.5296 148.046 45.261 148.046 43.7235C148.046 42.1861 147.421 40.9808 146.17 40.2041C144.919 39.4275 143.115 38.8389 140.757 38.4383C138.191 38.006 136.125 37.2769 134.56 36.2525C132.995 35.2281 132.214 33.6187 132.214 31.4241C132.214 29.2295 133.129 27.3125 134.958 25.9596C136.786 24.6066 138.928 23.9302 141.381 23.9302C144.269 23.9302 146.526 24.5539 148.155 25.8032C149.783 27.0525 150.733 28.8711 151.006 31.2572H148.046C147.757 29.6881 146.98 28.5583 145.712 27.8695C144.445 27.1808 143.201 26.8206 141.983 26.7889C140.315 26.7257 138.863 27.0525 137.628 27.7746C136.392 28.495 135.774 29.5598 135.774 30.969C135.774 32.3782 136.355 33.508 137.518 34.1633C138.682 34.8205 140.345 35.316 142.511 35.6533C148.558 36.5986 151.582 39.2009 151.582 43.46C151.582 45.7828 150.619 47.7472 148.694 49.3567C146.768 50.9662 144.378 51.7709 141.524 51.7709L141.526 51.7692Z" fill="currentColor"></path><path d="M164.384 51.7692C161.129 51.7692 158.629 50.924 156.889 49.2355C155.148 47.5452 154.214 45.6915 154.085 43.6744H157.19C157.382 44.9869 158.172 46.208 159.56 47.3378C160.947 48.4676 162.559 49.0317 164.397 49.0317C166.234 49.0317 167.777 48.5309 169.029 47.5311C170.28 46.5296 170.905 45.261 170.905 43.7235C170.905 42.1861 170.28 40.9808 169.029 40.2041C167.777 39.4275 165.973 38.8389 163.615 38.4383C161.049 38.006 158.983 37.2769 157.419 36.2525C155.854 35.2281 155.073 33.6187 155.073 31.4241C155.073 29.2295 155.988 27.3125 157.816 25.9596C159.645 24.6066 161.787 23.9302 164.24 23.9302C167.128 23.9302 169.384 24.5539 171.014 25.8032C172.642 27.0525 173.592 28.8711 173.865 31.2572H170.905C170.616 29.6881 169.838 28.5583 168.571 27.8695C167.304 27.1808 166.06 26.8206 164.842 26.7889C163.174 26.7257 161.722 27.0525 160.486 27.7746C159.251 28.495 158.633 29.5598 158.633 30.969C158.633 32.3782 159.214 33.508 160.377 34.1633C161.54 34.8205 163.203 35.316 165.37 35.6533C171.417 36.5986 174.44 39.2009 174.44 43.46C174.44 45.7828 173.478 47.7472 171.552 49.3567C169.627 50.9662 167.237 51.7709 164.383 51.7709L164.384 51.7692Z" fill="currentColor"></path><path d="M191.862 24.0235C195.535 24.0235 198.514 25.3132 200.8 27.8908C203.087 30.4702 204.229 33.7243 204.229 37.6566C204.229 41.5889 203.065 44.8746 200.741 47.5172C198.414 50.1599 195.406 51.4812 191.718 51.4812C187.612 51.4812 184.426 49.7909 182.165 46.4121V63.6366H178.724V24.287H181.78L182.165 28.9468C184.33 25.6646 187.563 24.0217 191.862 24.0217V24.0235ZM191.381 48.4309C194.204 48.4309 196.487 47.3978 198.227 45.3315C199.968 43.2651 200.837 40.7121 200.837 37.6689C200.837 34.6256 199.975 32.0076 198.25 29.9571C196.526 27.9066 194.236 26.8822 191.381 26.8822C189.055 26.8822 187.063 27.6553 185.403 29.1998C183.744 30.746 182.665 32.728 182.167 35.1457V40.1657C182.663 42.601 183.744 44.5865 185.403 46.1239C187.063 47.6613 189.057 48.4292 191.381 48.4292V48.4309Z" fill="currentColor"></path><path d="M218.978 51.6725C215.192 51.6725 212.093 50.3389 209.679 47.6734C207.264 45.0062 206.057 41.7047 206.057 37.7636C206.057 33.8225 207.264 30.5174 209.679 27.8432C212.093 25.1689 215.192 23.8318 218.978 23.8318C222.764 23.8318 225.908 25.1689 228.314 27.8432C230.72 30.5174 231.924 33.8242 231.924 37.7636C231.924 41.7029 230.72 45.0062 228.314 47.6734C225.908 50.3407 222.795 51.6725 218.978 51.6725ZM212.109 45.4262C213.85 47.4925 216.136 48.5256 218.966 48.5256C221.796 48.5256 224.082 47.4925 225.822 45.4262C227.563 43.3598 228.432 40.8068 228.432 37.7636C228.432 34.7203 227.57 32.1023 225.845 30.0518C224.12 28.0013 221.831 26.9769 218.976 26.9769C216.122 26.9769 213.867 28.0013 212.12 30.0518C210.37 32.1023 209.497 34.6729 209.497 37.7636C209.497 40.8543 210.367 43.3616 212.107 45.4262H212.109Z" fill="currentColor"></path><path d="M249.513 24.0233L249.465 26.9787C246.737 26.7222 244.441 27.3793 242.572 28.9484C240.703 30.5174 239.768 32.7682 239.768 35.699V51.3369H236.208V24.2869H239.263L239.768 29.6442C240.138 28.8271 240.514 28.1313 240.9 27.555C241.285 26.9787 241.838 26.3707 242.559 25.7294C243.281 25.0898 244.235 24.6277 245.423 24.3484C246.609 24.069 247.973 23.96 249.513 24.0233Z" fill="currentColor"></path><path d="M263.443 51.3846C258.711 51.3846 256.345 49.1356 256.345 44.6339L256.393 26.9297H252.254V24.1905H256.393V14.4387H259.833V24.1922H265.896V26.9789L259.689 26.9315V44.156C259.689 44.8132 259.721 45.3368 259.786 45.7304C259.849 46.1222 259.99 46.5386 260.207 46.9796C260.423 47.4207 260.803 47.7492 261.349 47.9653C261.894 48.1815 262.591 48.2904 263.441 48.2904H266.305V51.3899H263.441L263.443 51.3846Z" fill="currentColor"></path><path d="M28.7569 66.7557L1.78656 51.1845C1.17918 50.8336 0.804932 50.1857 0.804932 49.4839V18.3416C0.804932 17.6398 1.17918 16.9919 1.78656 16.641L28.7569 1.06984C29.3642 0.718907 30.1127 0.718907 30.7201 1.06984L57.6904 16.641C58.2978 16.9919 58.6721 17.6398 58.6721 18.3416V49.4839C58.6721 50.1857 58.2978 50.8336 57.6904 51.1845L30.7201 66.7557C30.1127 67.1066 29.3642 67.1066 28.7569 66.7557ZM6.69471 48.3513L28.7569 61.0892C29.3642 61.4401 30.1127 61.4401 30.7201 61.0892L52.7823 48.3513C53.3897 48.0004 53.7639 47.3525 53.7639 46.6506V21.1761C53.7639 20.4742 53.3897 19.8263 52.7823 19.4754L30.7201 6.73754C30.1127 6.3866 29.3642 6.3866 28.7569 6.73754L6.69471 19.4754C6.08733 19.8263 5.71308 20.4742 5.71308 21.1761V46.6506C5.71308 47.3525 6.08733 48.0004 6.69471 48.3513Z" fill="url(#paint0_linear_1465_950)"></path><path d="M28.7565 11.2432L10.5964 21.7282C9.98899 22.0792 9.61475 22.727 9.61475 23.4289V43.2652C9.61475 44.6677 10.3632 45.9647 11.578 46.6653L13.7867 47.9402C14.1143 48.1292 14.5229 47.8936 14.5229 47.5157V26.2634C14.5229 25.5615 14.8971 24.9136 15.5045 24.5627L28.7565 16.9121C29.3639 16.5612 30.1124 16.5612 30.7198 16.9121L43.9718 24.5627C44.5792 24.9136 44.9534 25.5615 44.9534 26.2634V41.5658C44.9534 42.2676 44.5792 42.9155 43.9718 43.2664L30.7198 50.917C30.1124 51.268 29.3639 51.268 28.7565 50.917L24.3392 48.3672C23.7318 48.0163 23.3576 47.3684 23.3576 46.6666V31.3642C23.3576 30.6623 23.7318 30.0144 24.3392 29.6635L28.7565 27.1137C29.3639 26.7628 30.1124 26.7628 30.7198 27.1137L35.1371 29.6635C35.7445 30.0144 36.1188 30.6623 36.1188 31.3642V36.465C36.1188 37.1668 35.7445 37.8147 35.1371 38.1657L32.9285 39.4405C32.6008 39.6295 32.1922 39.3939 32.1922 39.016V35.8785V33.6661C32.1922 32.9642 31.818 32.3164 31.2106 31.9654L30.229 31.3985C29.9247 31.2231 29.5517 31.2231 29.2474 31.3985L28.0203 32.1065C27.5651 32.3691 27.2841 32.8562 27.2841 33.3814V33.9127V44.4199C27.2841 45.1242 27.662 45.7745 28.2731 46.1242L28.7467 46.3942C29.3529 46.7402 30.0977 46.739 30.7026 46.3892L40.0453 40.9952C40.6527 40.6443 41.0269 39.9964 41.0269 39.2945V28.526C41.0269 27.8242 40.6527 27.1763 40.0453 26.8254L30.7198 21.4411C30.1124 21.0902 29.3639 21.0902 28.7565 21.4411L19.431 26.8254C18.8237 27.1763 18.4494 27.8242 18.4494 28.526V49.4949C18.4494 50.1968 18.8237 50.8446 19.431 51.1956L28.7565 56.5798C29.3639 56.9307 30.1124 56.9307 30.7198 56.5798L48.88 46.0948C49.4873 45.7438 49.8616 45.0959 49.8616 44.3941V23.4252C49.8616 22.7234 49.4873 22.0755 48.88 21.7246L30.7198 11.2395C30.1124 10.8886 29.3639 10.8886 28.7565 11.2395V11.2432Z" fill="url(#paint1_linear_1465_950)"></path><defs><linearGradient id="paint0_linear_1465_950" x1="13.1406" y1="2.18744" x2="43.2173" y2="65.9764" gradientUnits="userSpaceOnUse"><stop stop-color="#4A47D3"></stop><stop offset="1" stop-color="#6CB6AD"></stop></linearGradient><linearGradient id="paint1_linear_1465_950" x1="18.1943" y1="11.9328" x2="38.9759" y2="56.1852" gradientUnits="userSpaceOnUse"><stop stop-color="#4A47D3"></stop><stop offset="1" stop-color="#6CB6AD"></stop></linearGradient></defs></svg><div style="padding-bottom:4px">docs</div></div></a><div class="_flex _gap-4 _overflow-x-auto nextra-scrollbar _py-1.5"><a class="nextra-focus _text-sm contrast-more:_text-gray-700 contrast-more:dark:_text-gray-100 max-md:_hidden _whitespace-nowrap _ring-inset _text-gray-600 hover:_text-gray-800 dark:_text-gray-400 dark:hover:_text-gray-200" aria-current="false" href="/overview/why-passport-xyz">Overview</a><a class="nextra-focus _text-sm contrast-more:_text-gray-700 contrast-more:dark:_text-gray-100 max-md:_hidden _whitespace-nowrap _ring-inset _text-gray-600 hover:_text-gray-800 dark:_text-gray-400 dark:hover:_text-gray-200" aria-current="false" href="/building-with-passport/introduction">Building with Passport</a><a class="nextra-focus _text-sm contrast-more:_text-gray-700 contrast-more:dark:_text-gray-100 max-md:_hidden _whitespace-nowrap _ring-inset _font-medium _subpixel-antialiased" aria-current="true" href="/stamps/overview">Stamps</a><a class="nextra-focus _text-sm contrast-more:_text-gray-700 contrast-more:dark:_text-gray-100 max-md:_hidden _whitespace-nowrap _ring-inset _text-gray-600 hover:_text-gray-800 dark:_text-gray-400 dark:hover:_text-gray-200" aria-current="false" href="/community/getting-involved">Community</a><a class="nextra-focus _text-sm contrast-more:_text-gray-700 contrast-more:dark:_text-gray-100 max-md:_hidden _whitespace-nowrap _ring-inset _text-gray-600 hover:_text-gray-800 dark:_text-gray-400 dark:hover:_text-gray-200" aria-current="false" href="https://passport.gitcoin.co">Passport App</a></div><div class="_not-prose _relative _flex _items-center _text-gray-900 dark:_text-gray-300 contrast-more:_text-gray-800 contrast-more:dark:_text-gray-300 max-md:_hidden"><input spellcheck="false" class="_rounded-lg _px-3 _py-2 _transition-colors _w-full md:_w-64 _text-base _leading-tight md:_text-sm _bg-black/[.05] dark:_bg-gray-50/10 placeholder:_text-gray-500 dark:placeholder:_text-gray-400 contrast-more:_border contrast-more:_border-current [&amp;::-webkit-search-cancel-button]:_appearance-none" autoComplete="off" placeholder="Search documentation..." id="headlessui-combobox-input-:R1dn96:" role="combobox" type="search" aria-expanded="false" aria-autocomplete="list" data-headlessui-state="" value=""/></div><a class="nextra-focus" href="https://github.com/passportxyz/passport-docs" target="_blank" rel="noreferrer"><svg width="24" height="24" fill="currentColor" viewBox="3 3 18 18"><title>GitHub</title><path d="M12 3C7.0275 3 3 7.12937 3 12.2276C3 16.3109 5.57625 19.7597 9.15374 20.9824C9.60374 21.0631 9.77249 20.7863 9.77249 20.5441C9.77249 20.3249 9.76125 19.5982 9.76125 18.8254C7.5 19.2522 6.915 18.2602 6.735 17.7412C6.63375 17.4759 6.19499 16.6569 5.8125 16.4378C5.4975 16.2647 5.0475 15.838 5.80124 15.8264C6.51 15.8149 7.01625 16.4954 7.18499 16.7723C7.99499 18.1679 9.28875 17.7758 9.80625 17.5335C9.885 16.9337 10.1212 16.53 10.38 16.2993C8.3775 16.0687 6.285 15.2728 6.285 11.7432C6.285 10.7397 6.63375 9.9092 7.20749 9.26326C7.1175 9.03257 6.8025 8.08674 7.2975 6.81794C7.2975 6.81794 8.05125 6.57571 9.77249 7.76377C10.4925 7.55615 11.2575 7.45234 12.0225 7.45234C12.7875 7.45234 13.5525 7.55615 14.2725 7.76377C15.9937 6.56418 16.7475 6.81794 16.7475 6.81794C17.2424 8.08674 16.9275 9.03257 16.8375 9.26326C17.4113 9.9092 17.76 10.7281 17.76 11.7432C17.76 15.2843 15.6563 16.0687 13.6537 16.2993C13.98 16.5877 14.2613 17.1414 14.2613 18.0065C14.2613 19.2407 14.25 20.2326 14.25 20.5441C14.25 20.7863 14.4188 21.0746 14.8688 20.9824C16.6554 20.364 18.2079 19.1866 19.3078 17.6162C20.4077 16.0457 20.9995 14.1611 21 12.2276C21 7.12937 16.9725 3 12 3Z"></path></svg><span class="_sr-only">GitHub</span></a><button class="_transition nextra-hamburger _rounded md:_hidden" aria-label="Menu" type="button" data-headlessui-state=""><svg fill="none" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor" class=""><g><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16"></path></g><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 12h16"></path><g><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 18h16"></path></g></svg></button></nav></div><div class="_mx-auto _flex _max-w-[90rem]"><div class="max-xl:_hidden _h-0 _w-64 _shrink-0"></div><div class="[transition:background-color_1.5s_ease] _bg-transparent"></div><aside class="nextra-sidebar-container _flex _flex-col md:_top-16 md:_shrink-0 motion-reduce:_transform-none motion-reduce:_transition-none [.resizing_&amp;]:_transition-none _transform-gpu _transition-all _ease-in-out print:_hidden md:_w-64 md:_hidden max-md:[transform:translate3d(0,-100%,0)]"><div class="_px-4 _pt-4 md:_hidden"><div class="_not-prose _relative _flex _items-center _text-gray-900 dark:_text-gray-300 contrast-more:_text-gray-800 contrast-more:dark:_text-gray-300"><input spellcheck="false" class="_rounded-lg _px-3 _py-2 _transition-colors _w-full md:_w-64 _text-base _leading-tight md:_text-sm _bg-black/[.05] dark:_bg-gray-50/10 placeholder:_text-gray-500 dark:placeholder:_text-gray-400 contrast-more:_border contrast-more:_border-current [&amp;::-webkit-search-cancel-button]:_appearance-none" autoComplete="off" placeholder="Search documentation..." id="headlessui-combobox-input-:R5msr6:" role="combobox" type="search" aria-expanded="false" aria-autocomplete="list" data-headlessui-state="" value=""/></div></div><div class="_overflow-y-auto _p-4 _grow md:_h-[calc(100vh-var(--nextra-navbar-height)-var(--nextra-menu-height))] nextra-scrollbar"></div><div class="nextra-sidebar-footer _sticky _bottom-0 _flex _items-center _gap-2 _py-4 _mx-3 _px-1" data-toggle-animation="off"><div class="_grow _flex _flex-col"><button title="Change theme" class="_h-7 _rounded-md _px-2 _text-xs _font-medium _transition-colors _text-gray-600 dark:_text-gray-400" id="headlessui-listbox-button-:R6tsr6:" type="button" aria-haspopup="listbox" aria-expanded="false" data-headlessui-state=""><div class="_flex _items-center _gap-2 _capitalize"><svg fill="none" viewBox="3 3 18 18" width="12" height="12" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" fill="currentColor" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg><span class="">Light</span></div></button></div><button class="_transition max-md:_hidden _rounded-md _p-2 _text-gray-600 dark:_text-gray-400" title="Hide sidebar" type="button" data-headlessui-state=""><svg viewBox="0 0 16 16" fill="currentColor" height="12" class=""><path d="M4.177 7.823l2.396-2.396A.25.25 0 017 5.604v4.792a.25.25 0 01-.427.177L4.177 8.177a.25.25 0 010-.354z"></path><path fill-rule="evenodd" d="M0 1.75C0 .784.784 0 1.75 0h12.5C15.216 0 16 .784 16 1.75v12.5A1.75 1.75 0 0114.25 16H1.75A1.75 1.75 0 010 14.25V1.75zm1.75-.25a.25.25 0 00-.25.25v12.5c0 .138.112.25.25.25H9.5v-13H1.75zm12.5 13H11v-13h3.25a.25.25 0 01.25.25v12.5a.25.25 0 01-.25.25z"></path></svg></button></div></aside><nav class="nextra-toc _order-last max-xl:_hidden _w-64 _shrink-0 print:_hidden" aria-label="table of contents"></nav><div id="reach-skip-nav"></div><article class="_w-full _break-words nextra-content _flex _min-h-[calc(100vh-var(--nextra-navbar-height))] _min-w-0 _justify-center _pb-8 _pr-[calc(env(safe-area-inset-right)-1.5rem)]"><main class="_w-full _min-w-0 _max-w-6xl _px-6 _pt-4 md:_px-12"><h1 class="_mt-2 _text-4xl _font-bold _tracking-tight _text-slate-900 dark:_text-slate-100">Submitting a Stamp pull request</h1>
<div class="nextra-callout _overflow-x-auto _mt-6 _flex _rounded-lg _border _py-2 ltr:_pr-4 rtl:_pl-4 contrast-more:_border-current contrast-more:dark:_border-current _border-blue-200 _bg-blue-100 _text-blue-900 dark:_border-blue-200/30 dark:_bg-blue-900/30 dark:_text-blue-200"><div class="_select-none _text-xl ltr:_pl-3 ltr:_pr-2 rtl:_pr-3 rtl:_pl-2" style="font-family:&quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;"><svg viewBox="0 0 20 20" fill="currentColor" width="20" height="20" class="_mt-1"><path fill-rule="evenodd" clip-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z"></path></svg></div><div class="_w-full _min-w-0 _leading-7"><p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">This guide is reserved for those partners who have been approved by the Human Passport team to submit a pull request.</p><p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">If you haven’t been approved yet, please visit the <a class="nextra-focus _text-primary-600 _underline hover:_no-underline _decoration-from-font [text-underline-position:from-font]" href="/stamps/overview">Stamps overview for developers</a> page, and follow the steps there.</p></div></div>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">Creating a new Stamp involved defining verification logic and adding configuration details to our existing Stamp infrastructure.</p>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">We have a standardized format for Stamps and this page will help you to understand all the information you need to provide. The process begins by creating your own copy of our GitHub repository. The instructions on this page will walk you through how to change the codebase to support your Stamp and submit the changes back to the Human Passport team. </p>
<hr class="_my-8 _border-neutral-200/70 contrast-more:_border-neutral-400 dark:_border-primary-100/10 contrast-more:dark:_border-neutral-400"/>
<h3 id="1-fork-the-human-passport-github-repository" class="_font-semibold _tracking-tight _text-slate-900 dark:_text-slate-100 _mt-8 _text-2xl">1. Fork the Human Passport GitHub repository<a href="#1-fork-the-human-passport-github-repository" class="nextra-focus subheading-anchor" aria-label="Permalink for this section"></a></h3>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">Whether you want to create an EVM or a non-EVM Stamp, the process begins by forking the Human Passport GitHub repository. Clone your fork and navigating to the <code class="nextra-code" dir="ltr">platforms</code> directory.</p>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">Here is our <a class="nextra-focus _text-primary-600 _underline hover:_no-underline _decoration-from-font [text-underline-position:from-font]" href="https://github.com/passportxyz/passport" target="_blank" rel="noreferrer">GitHub repository</a>.</p>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">This is the <a class="nextra-focus _text-primary-600 _underline hover:_no-underline _decoration-from-font [text-underline-position:from-font]" href="https://github.com/passportxyz/passport/tree/main/platforms" target="_blank" rel="noreferrer"><code class="nextra-code" dir="ltr">platforms</code> directory</a>, located at <code class="nextra-code" dir="ltr">passport/platforms.</code></p>
<hr class="_my-8 _border-neutral-200/70 contrast-more:_border-neutral-400 dark:_border-primary-100/10 contrast-more:dark:_border-neutral-400"/>
<h3 id="2-create-new-files" class="_font-semibold _tracking-tight _text-slate-900 dark:_text-slate-100 _mt-8 _text-2xl">2. Create new files<a href="#2-create-new-files" class="nextra-focus subheading-anchor" aria-label="Permalink for this section"></a></h3>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">Adding a Stamp requires you to create some new files inside the <code class="nextra-code" dir="ltr">platforms/src</code> directory. Inside <code class="nextra-code" dir="ltr">platforms/src</code> create a new directory and name it according to your Stamp. In the test here we will use the word <code class="nextra-code" dir="ltr">example.</code></p>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">For example, the following would be an appropriate command for a bash user:</p>
<div class="nextra-code _relative [&amp;:not(:first-child)]:_mt-6"><pre class="nextra-focus _overflow-x-auto _subpixel-antialiased _text-[.9em] _bg-white dark:_bg-black _py-4 _ring-1 _ring-inset _ring-gray-300 dark:_ring-neutral-700 contrast-more:_ring-gray-900 contrast-more:dark:_ring-gray-50 contrast-more:_contrast-150 _rounded-md" tabindex="0"><code class="nextra-code" dir="ltr"><span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> platforms/src</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">mkdir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> example</span></span></code></pre><div class="_opacity-0 _transition [div:hover&gt;&amp;]:_opacity-100 focus-within:_opacity-100 _flex _gap-1 _absolute _right-4 _top-2"><button class="_transition _border _border-gray-300 dark:_border-neutral-700 contrast-more:_border-gray-900 contrast-more:dark:_border-gray-50 _rounded-md _p-1.5 md:_hidden" title="Toggle word wrap" type="button" data-headlessui-state=""><svg viewBox="0 0 24 24" fill="currentColor" height="16"><path d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button class="_transition _border _border-gray-300 dark:_border-neutral-700 contrast-more:_border-gray-900 contrast-more:dark:_border-gray-50 _rounded-md _p-1.5" title="Copy code" type="button" data-headlessui-state=""><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" height="16" class="nextra-copy-icon"><rect x="9" y="9" width="13" height="13" rx="2"></rect><path d="M5 15H4C2.89543 15 2 14.1046 2 13V4C2 2.89543 2.89543 2 4 2H13C14.1046 2 15 2.89543 15 4V5"></path></svg></button></div></div>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">Inside <code class="nextra-code" dir="ltr">example</code>,  create the following subdirectories and files:</p>
<div class="nextra-code _relative [&amp;:not(:first-child)]:_mt-6"><pre class="nextra-focus _overflow-x-auto _subpixel-antialiased _text-[.9em] _bg-white dark:_bg-black _py-4 _ring-1 _ring-inset _ring-gray-300 dark:_ring-neutral-700 contrast-more:_ring-gray-900 contrast-more:dark:_ring-gray-50 contrast-more:_contrast-150 _rounded-md" tabindex="0"><code class="nextra-code" dir="ltr"><span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># files to create inside platforms/src/example:</span></span>
<span> </span>
<span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  __tests__</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">--</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> example.test.ts</span></span>
<span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  Providers</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">--</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> example.ts</span></span>
<span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  App-Bindings.ts</span></span>
<span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  index.ts</span></span>
<span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  Providers-config.ts</span></span></code></pre><div class="_opacity-0 _transition [div:hover&gt;&amp;]:_opacity-100 focus-within:_opacity-100 _flex _gap-1 _absolute _right-4 _top-2"><button class="_transition _border _border-gray-300 dark:_border-neutral-700 contrast-more:_border-gray-900 contrast-more:dark:_border-gray-50 _rounded-md _p-1.5 md:_hidden" title="Toggle word wrap" type="button" data-headlessui-state=""><svg viewBox="0 0 24 24" fill="currentColor" height="16"><path d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button class="_transition _border _border-gray-300 dark:_border-neutral-700 contrast-more:_border-gray-900 contrast-more:dark:_border-gray-50 _rounded-md _p-1.5" title="Copy code" type="button" data-headlessui-state=""><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" height="16" class="nextra-copy-icon"><rect x="9" y="9" width="13" height="13" rx="2"></rect><path d="M5 15H4C2.89543 15 2 14.1046 2 13V4C2 2.89543 2.89543 2 4 2H13C14.1046 2 15 2.89543 15 4V5"></path></svg></button></div></div>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">Each of the files you just created has a distinct purpose, as described in the following table:</p>
<table class="_not-prose _block _overflow-x-auto nextra-scrollbar [&amp;:not(:first-child)]:_mt-6 _p-0"><thead><tr class="_m-0 _border-t _border-gray-300 _p-0 dark:_border-gray-600 even:_bg-gray-100 even:dark:_bg-gray-600/20"><th class="_m-0 _border _border-gray-300 _px-4 _py-2 _font-semibold dark:_border-gray-600">file</th><th class="_m-0 _border _border-gray-300 _px-4 _py-2 _font-semibold dark:_border-gray-600">purpose</th></tr></thead><tbody><tr class="_m-0 _border-t _border-gray-300 _p-0 dark:_border-gray-600 even:_bg-gray-100 even:dark:_bg-gray-600/20"><td class="_m-0 _border _border-gray-300 _px-4 _py-2 dark:_border-gray-600">__tests__/example.test.ts</td><td class="_m-0 _border _border-gray-300 _px-4 _py-2 dark:_border-gray-600">includes thorough test cases for the Stamp</td></tr><tr class="_m-0 _border-t _border-gray-300 _p-0 dark:_border-gray-600 even:_bg-gray-100 even:dark:_bg-gray-600/20"><td class="_m-0 _border _border-gray-300 _px-4 _py-2 dark:_border-gray-600">Providers/example.ts</td><td class="_m-0 _border _border-gray-300 _px-4 _py-2 dark:_border-gray-600">includes a <code class="nextra-code" dir="ltr">verify()</code> function that receives a proof and verifies it.</td></tr><tr class="_m-0 _border-t _border-gray-300 _p-0 dark:_border-gray-600 even:_bg-gray-100 even:dark:_bg-gray-600/20"><td class="_m-0 _border _border-gray-300 _px-4 _py-2 dark:_border-gray-600">App-bindings.ts</td><td class="_m-0 _border _border-gray-300 _px-4 _py-2 dark:_border-gray-600">Collects all the Stamp data and formats for communication with the Human Passport server</td></tr><tr class="_m-0 _border-t _border-gray-300 _p-0 dark:_border-gray-600 even:_bg-gray-100 even:dark:_bg-gray-600/20"><td class="_m-0 _border _border-gray-300 _px-4 _py-2 dark:_border-gray-600">Providers-config.ts</td><td class="_m-0 _border _border-gray-300 _px-4 _py-2 dark:_border-gray-600">Collects Stamp metadata. For example, icon image, name and description, provider settings</td></tr><tr class="_m-0 _border-t _border-gray-300 _p-0 dark:_border-gray-600 even:_bg-gray-100 even:dark:_bg-gray-600/20"><td class="_m-0 _border _border-gray-300 _px-4 _py-2 dark:_border-gray-600">index.ts</td><td class="_m-0 _border _border-gray-300 _px-4 _py-2 dark:_border-gray-600">Exports the providers, config and app bindings</td></tr><tr class="_m-0 _border-t _border-gray-300 _p-0 dark:_border-gray-600 even:_bg-gray-100 even:dark:_bg-gray-600/20"><td class="_m-0 _border _border-gray-300 _px-4 _py-2 dark:_border-gray-600"></td><td class="_m-0 _border _border-gray-300 _px-4 _py-2 dark:_border-gray-600"></td></tr></tbody></table>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">You will also need to update some information in existing files in <code class="nextra-code" dir="ltr">platforms/src</code> but for now we can focus on adding the right information to these newly created files. For the <code class="nextra-code" dir="ltr">App-bindings.ts</code> file specifically, the instructions are slightly different for EVM and non-EVM Stamps.</p>
<h4 id="app-bindingsts" class="_font-semibold _tracking-tight _text-slate-900 dark:_text-slate-100 _mt-8 _text-xl"><code class="nextra-code" dir="ltr">App-bindings.ts</code><a href="#app-bindingsts" class="nextra-focus subheading-anchor" aria-label="Permalink for this section"></a></h4>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">Updating <code class="nextra-code" dir="ltr">App-bindings.ts</code> is slightly different depending upon whether you are creating an EVM Stamp or a non-EVM Stamp.</p>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7"><em><strong>What is an EVM Stamp?</strong></em></p>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">Some Stamps rely upon the Ethereum Virtual Machine (EVM) while some rely upon OAuth to determine ownership. If your Stamp represents some web3 native credential such as ownership of a digital asset (for example, ETH, some ERC20 token, NFT or POAP) or onchain activity (for example, certain transaction) that can be verified by querying the blockchain, then your Stamp is an EVM Stamp. If your Stamp relies on ownership of some web2 account that your users login to, then it is a non-EVM Stamp.</p>
<h4 id="evm-stamps" class="_font-semibold _tracking-tight _text-slate-900 dark:_text-slate-100 _mt-8 _text-xl"><code class="nextra-code" dir="ltr">EVM Stamps</code><a href="#evm-stamps" class="nextra-focus subheading-anchor" aria-label="Permalink for this section"></a></h4>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">Copy the following code into the file, replacing <code class="nextra-code" dir="ltr">&lt;EXAMPLE&gt;</code> with your Stamp name. Note that for EVM Stamps the <code class="nextra-code" dir="ltr">AppContext</code> and <code class="nextra-code" dir="ltr">ProviderPayload</code> types are imported from <code class="nextra-code" dir="ltr">&quot;../types&quot;</code> and the<code class="nextra-code" dir="ltr">Platform</code> class is imported from <code class="nextra-code" dir="ltr">&quot;../utils/platform&quot;.</code></p>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">The new Stamp is exported as a class extending the <code class="nextra-code" dir="ltr">Platform</code> class.</p>
<div class="nextra-code _relative [&amp;:not(:first-child)]:_mt-6"><pre class="nextra-focus _overflow-x-auto _subpixel-antialiased _text-[.9em] _bg-white dark:_bg-black _py-4 _ring-1 _ring-inset _ring-gray-300 dark:_ring-neutral-700 contrast-more:_ring-gray-900 contrast-more:dark:_ring-gray-50 contrast-more:_contrast-150 _rounded-md" tabindex="0"><code class="nextra-code" dir="ltr"><span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">//App-bindings.ts - EVM</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> \{ AppContext, ProviderPayload } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> &quot;../types&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> \{ Platform } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> &quot;../utils/platform&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span> </span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> &lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">EXAMPLE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Platform</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> \{</span></span>
<span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">    platformId</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> &quot;&lt;EXAMPLE&gt;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">    path</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> &quot;&lt;EXAMPLE&gt;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">    clientId</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">    redirectUri</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">    isEVM</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // if the Stamp requires extra information to be displayed to the user, add</span></span>
<span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // here</span></span>
<span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">    banner</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> \{</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        heading:</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        &quot;Your Stamp heading here&quot;</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    };</span></span>
<span> </span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    async</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getProviderPayload</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">appContext</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> AppContext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">ProviderPayload</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt; \{</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> result</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> await</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(\{});</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> result;</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre><div class="_opacity-0 _transition [div:hover&gt;&amp;]:_opacity-100 focus-within:_opacity-100 _flex _gap-1 _absolute _right-4 _top-2"><button class="_transition _border _border-gray-300 dark:_border-neutral-700 contrast-more:_border-gray-900 contrast-more:dark:_border-gray-50 _rounded-md _p-1.5 md:_hidden" title="Toggle word wrap" type="button" data-headlessui-state=""><svg viewBox="0 0 24 24" fill="currentColor" height="16"><path d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button class="_transition _border _border-gray-300 dark:_border-neutral-700 contrast-more:_border-gray-900 contrast-more:dark:_border-gray-50 _rounded-md _p-1.5" title="Copy code" type="button" data-headlessui-state=""><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" height="16" class="nextra-copy-icon"><rect x="9" y="9" width="13" height="13" rx="2"></rect><path d="M5 15H4C2.89543 15 2 14.1046 2 13V4C2 2.89543 2.89543 2 4 2H13C14.1046 2 15 2.89543 15 4V5"></path></svg></button></div></div>
<h4 id="non-evm-stamps" class="_font-semibold _tracking-tight _text-slate-900 dark:_text-slate-100 _mt-8 _text-xl">Non-EVM Stamps<a href="#non-evm-stamps" class="nextra-focus subheading-anchor" aria-label="Permalink for this section"></a></h4>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">Copy the following code into the file, replacing <code class="nextra-code" dir="ltr">&lt;EXAMPLE&gt;</code> with your Stamp name. Note that for non-EVM Stamps the <code class="nextra-code" dir="ltr">PlatformOptions</code> type is imported from <code class="nextra-code" dir="ltr">&quot;../types&quot;</code> and the <code class="nextra-code" dir="ltr">Platform</code> class is imported from <code class="nextra-code" dir="ltr">&quot;../utils/platform&quot;.</code></p>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">The new Stamp is exported as a class extending the <code class="nextra-code" dir="ltr">Platform</code> class.</p>
<div class="nextra-code _relative [&amp;:not(:first-child)]:_mt-6"><pre class="nextra-focus _overflow-x-auto _subpixel-antialiased _text-[.9em] _bg-white dark:_bg-black _py-4 _ring-1 _ring-inset _ring-gray-300 dark:_ring-neutral-700 contrast-more:_ring-gray-900 contrast-more:dark:_ring-gray-50 contrast-more:_contrast-150 _rounded-md" tabindex="0"><code class="nextra-code" dir="ltr"><span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">//App-bindings.ts - OAuth</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> \{ PlatformOptions } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> &quot;../types&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> \{ Platform } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> &quot;../utils/platform&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> &lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">EXAMPLE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Platform</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> \{</span></span>
<span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">    platformId</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> &quot;&lt;EXAMPLE&gt;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">    path</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> &quot;&lt;EXAMPLE&gt;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">    clientId</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">    redirectUri</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span> </span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">options</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> platformOptions</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> \{}) \{</span></span>
<span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    super</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">();</span></span>
<span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.clientId </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> options.clientId </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">as</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.redirectUri </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> options.redirectUri </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">as</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span> </span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">async</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getOauthUrl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">state</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt; \{</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">EXAMPLE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;Url </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> await</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        `&lt;EXAMPLE&gt; URL`</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    );</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> &lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">EXAMPLE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;Url;</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre><div class="_opacity-0 _transition [div:hover&gt;&amp;]:_opacity-100 focus-within:_opacity-100 _flex _gap-1 _absolute _right-4 _top-2"><button class="_transition _border _border-gray-300 dark:_border-neutral-700 contrast-more:_border-gray-900 contrast-more:dark:_border-gray-50 _rounded-md _p-1.5 md:_hidden" title="Toggle word wrap" type="button" data-headlessui-state=""><svg viewBox="0 0 24 24" fill="currentColor" height="16"><path d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button class="_transition _border _border-gray-300 dark:_border-neutral-700 contrast-more:_border-gray-900 contrast-more:dark:_border-gray-50 _rounded-md _p-1.5" title="Copy code" type="button" data-headlessui-state=""><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" height="16" class="nextra-copy-icon"><rect x="9" y="9" width="13" height="13" rx="2"></rect><path d="M5 15H4C2.89543 15 2 14.1046 2 13V4C2 2.89543 2.89543 2 4 2H13C14.1046 2 15 2.89543 15 4V5"></path></svg></button></div></div>
<h4 id="providers-configts" class="_font-semibold _tracking-tight _text-slate-900 dark:_text-slate-100 _mt-8 _text-xl"><code class="nextra-code" dir="ltr">Providers-config.ts</code><a href="#providers-configts" class="nextra-focus subheading-anchor" aria-label="Permalink for this section"></a></h4>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">Copy the following code into <code class="nextra-code" dir="ltr">Providers-config.ts</code> replacing <code class="nextra-code" dir="ltr">&lt;EXAMPLE&gt;</code> with your Stamp name. This file imports the <code class="nextra-code" dir="ltr">PlatformSpec</code> and <code class="nextra-code" dir="ltr">PlatformGroupSpec</code> from <code class="nextra-code" dir="ltr">&quot;../types&quot;</code> and exports the Stamp details and provider config data.</p>
<div class="nextra-code _relative [&amp;:not(:first-child)]:_mt-6"><pre class="nextra-focus _overflow-x-auto _subpixel-antialiased _text-[.9em] _bg-white dark:_bg-black _py-4 _ring-1 _ring-inset _ring-gray-300 dark:_ring-neutral-700 contrast-more:_ring-gray-900 contrast-more:dark:_ring-gray-50 contrast-more:_contrast-150 _rounded-md" tabindex="0"><code class="nextra-code" dir="ltr"><span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">//Providers-config.ts</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> \{ PlatformSpec, PlatformGroupSpec, Provider } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> &quot;../types&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> \{ &lt;EXAMPLE&gt;Provider } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> &lt;ProviderFile&gt;</span></span>
<span> </span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> PlatformDetails</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> PlatformSpec</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> \{</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    icon: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">&quot;./assets/&lt;EXAMPLE&gt;StampIcon.svg&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    platform: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">&quot;&lt;EXAMPLE&gt;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">&quot;&lt;EXAMPLE&gt;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    description: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">&quot;Description to user about how they&#x27;re going to use the Stamp&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    connectMessage: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">&quot;Connect Account&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    };</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    </span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> ProviderConfig</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> PlatformGroupSpec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">[] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    \{</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    platformGroup: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">&quot;Name of the Stamp platform group&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    providers: [</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        \{</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        title: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">&quot;Title of the provider&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">&quot;&lt;EXAMPLE&gt;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        },</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    ]</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    },</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">];</span></span>
<span> </span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> providers</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Provider</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">[] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">new</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">ProviderClass</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()]</span></span></code></pre><div class="_opacity-0 _transition [div:hover&gt;&amp;]:_opacity-100 focus-within:_opacity-100 _flex _gap-1 _absolute _right-4 _top-2"><button class="_transition _border _border-gray-300 dark:_border-neutral-700 contrast-more:_border-gray-900 contrast-more:dark:_border-gray-50 _rounded-md _p-1.5 md:_hidden" title="Toggle word wrap" type="button" data-headlessui-state=""><svg viewBox="0 0 24 24" fill="currentColor" height="16"><path d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button class="_transition _border _border-gray-300 dark:_border-neutral-700 contrast-more:_border-gray-900 contrast-more:dark:_border-gray-50 _rounded-md _p-1.5" title="Copy code" type="button" data-headlessui-state=""><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" height="16" class="nextra-copy-icon"><rect x="9" y="9" width="13" height="13" rx="2"></rect><path d="M5 15H4C2.89543 15 2 14.1046 2 13V4C2 2.89543 2.89543 2 4 2H13C14.1046 2 15 2.89543 15 4V5"></path></svg></button></div></div>
<h4 id="indexts" class="_font-semibold _tracking-tight _text-slate-900 dark:_text-slate-100 _mt-8 _text-xl"><code class="nextra-code" dir="ltr">index.ts</code><a href="#indexts" class="nextra-focus subheading-anchor" aria-label="Permalink for this section"></a></h4>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">Copy and paste the following code into <code class="nextra-code" dir="ltr">index.ts</code> replacing <code class="nextra-code" dir="ltr">&lt;EXAMPLE&gt;</code> with your Stamp name. This code is used to export the providers, provider config data and app bindings.</p>
<div class="nextra-code _relative [&amp;:not(:first-child)]:_mt-6"><pre class="nextra-focus _overflow-x-auto _subpixel-antialiased _text-[.9em] _bg-white dark:_bg-black _py-4 _ring-1 _ring-inset _ring-gray-300 dark:_ring-neutral-700 contrast-more:_ring-gray-900 contrast-more:dark:_ring-gray-50 contrast-more:_contrast-150 _rounded-md" tabindex="0"><code class="nextra-code" dir="ltr"><span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">//index.ts</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> \{ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">EXAMPLE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">Platform } from </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">&quot;./App-Bindings&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> \{ ProviderConfig, PlatformDetails, providers } from </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">&quot;./Providers-config&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> \{ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">EXAMPLE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">Provider }</span></span></code></pre><div class="_opacity-0 _transition [div:hover&gt;&amp;]:_opacity-100 focus-within:_opacity-100 _flex _gap-1 _absolute _right-4 _top-2"><button class="_transition _border _border-gray-300 dark:_border-neutral-700 contrast-more:_border-gray-900 contrast-more:dark:_border-gray-50 _rounded-md _p-1.5 md:_hidden" title="Toggle word wrap" type="button" data-headlessui-state=""><svg viewBox="0 0 24 24" fill="currentColor" height="16"><path d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button class="_transition _border _border-gray-300 dark:_border-neutral-700 contrast-more:_border-gray-900 contrast-more:dark:_border-gray-50 _rounded-md _p-1.5" title="Copy code" type="button" data-headlessui-state=""><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" height="16" class="nextra-copy-icon"><rect x="9" y="9" width="13" height="13" rx="2"></rect><path d="M5 15H4C2.89543 15 2 14.1046 2 13V4C2 2.89543 2.89543 2 4 2H13C14.1046 2 15 2.89543 15 4V5"></path></svg></button></div></div>
<hr class="_my-8 _border-neutral-200/70 contrast-more:_border-neutral-400 dark:_border-primary-100/10 contrast-more:dark:_border-neutral-400"/>
<h4 id="providersexamplets" class="_font-semibold _tracking-tight _text-slate-900 dark:_text-slate-100 _mt-8 _text-xl"><code class="nextra-code" dir="ltr">Providers/example.ts</code><a href="#providersexamplets" class="nextra-focus subheading-anchor" aria-label="Permalink for this section"></a></h4>
<div class="nextra-callout _overflow-x-auto _mt-6 _flex _rounded-lg _border _py-2 ltr:_pr-4 rtl:_pl-4 contrast-more:_border-current contrast-more:dark:_border-current _border-blue-200 _bg-blue-100 _text-blue-900 dark:_border-blue-200/30 dark:_bg-blue-900/30 dark:_text-blue-200"><div class="_select-none _text-xl ltr:_pl-3 ltr:_pr-2 rtl:_pr-3 rtl:_pl-2" style="font-family:&quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;"><svg viewBox="0 0 20 20" fill="currentColor" width="20" height="20" class="_mt-1"><path fill-rule="evenodd" clip-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z"></path></svg></div><div class="_w-full _min-w-0 _leading-7"><p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">Remember your file name will not be “example.ts” - it will be your stamp name. Some existing examples include “google.ts”, “EthErc20Possession.ts” and “github.ts”._</p></div></div>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">This is where the hard work is done, because it is in this file that you will define your custom verification logic. The code will vary between applications depending on precisely what information is being verified. The verification could include communication with API servers, blockchain nodes or RPC providers, smart contracts or other external resources. We can walk through an example here, but bear in mind that you will have to adapt to your specific use case.</p>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">Let’s look at the Ethereum activity Stamp. This is an EVM Stamp that checks whether a user owns a certain threshold amount of ETH or ERC-20 tokens.  </p>
<div class="nextra-code _relative [&amp;:not(:first-child)]:_mt-6"><pre class="nextra-focus _overflow-x-auto _subpixel-antialiased _text-[.9em] _bg-white dark:_bg-black _py-4 _ring-1 _ring-inset _ring-gray-300 dark:_ring-neutral-700 contrast-more:_ring-gray-900 contrast-more:dark:_ring-gray-50 contrast-more:_contrast-150 _rounded-md" tabindex="0"><code class="nextra-code" dir="ltr"><span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// EthErc20Possession.ts</span></span>
<span> </span>
<span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// ----- Types</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> \{ Provider, ProviderOptions } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> &quot;../../types&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> \{ RequestPayload, VerifiedPayload } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> &quot;@gitcoin/passport-types&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span> </span>
<span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// ----- Ethers library</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> \{ Contract } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> &quot;ethers&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> \{ formatUnits } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> &quot;@ethersproject/units&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// ----- RPC Getter</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> \{ getRPCProvider } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> &quot;../../utils/signer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span> </span>
<span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">/*</span></span>
<span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">Eth ERC20 Possession Provider can be used to check a greater than balance for ethereum or any other EVM token (ERC20).</span></span>
<span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">By default this will verify the ethereum balance for the address in the parameter. To customize the</span></span>
<span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">token set the contract_address or decimal number in the options passed to the class. The default decimal number for formatting</span></span>
<span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">is 18.</span></span>
<span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">*/</span></span>
<span> </span>
<span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// define ERC20 contract ABI here</span></span>
<span> </span>
<span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// set the network rpc url based on env</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> RPC_URL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> process.env.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">RPC_URL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span> </span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getTokenBalance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span></span>
<span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  address</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  tokenContractAddress</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  decimalNumber</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> number</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  payload</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> RequestPayload</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">number</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt; \{</span></span>
<span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // define a provider using the rpc url</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> staticProvider</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getRPCProvider</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(payload);</span></span>
<span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // load Token contract</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> readContract</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Contract</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(tokenContractAddress, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">ERC20_ABI</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, staticProvider);</span></span>
<span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment, @typescript-eslint/no-unsafe-call</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> tokenBalance</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> readContract?.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">balanceOf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(address);</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> balanceFormatted</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> formatUnits</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(tokenBalance, decimalNumber);</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> parseFloat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(balanceFormatted);</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span> </span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getEthBalance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">address</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">payload</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> RequestPayload</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">number</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt; \{</span></span>
<span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // define a provider using the rpc url</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> staticProvider</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getRPCProvider</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(payload);</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> ethBalance</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> staticProvider?.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">getBalance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(address);</span></span>
<span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // convert a currency unit from wei to ether</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> balanceFormatted</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> formatUnits</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(ethBalance, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">18</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> parseFloat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(balanceFormatted);</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span> </span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> type</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> ethErc20PossessionProviderOptions</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> \{</span></span>
<span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  threshold</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> number</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  recordAttribute</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  contractAddress</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  decimalNumber</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> number</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  error</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">};</span></span>
<span> </span>
<span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// Export an Eth ERC20 Possessions Provider. This is intended to be a generic implementation that should be extended</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> EthErc20PossessionProvider</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Provider</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> \{</span></span>
<span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // The type will be determined dynamically, from the options passed in to the constructor</span></span>
<span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> &quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span> </span>
<span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // Options can be set here and/or via the constructor</span></span>
<span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  _options</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> ethErc20PossessionProviderOptions</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> \{</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    threshold: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    recordAttribute: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    contractAddress: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    decimalNumber: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">18</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    error: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">&quot;Coin Possession Provider Error&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  };</span></span>
<span> </span>
<span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // construct the provider instance with supplied options</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">options</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> ProviderOptions</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> \{}) \{</span></span>
<span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">._options </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> \{ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">...</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">._options, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">options };</span></span>
<span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.type </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> `$</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\{</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">this._options.recordAttribute}#$</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\{</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">this._options.threshold}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span> </span>
<span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // verify that the proof object contains valid === &quot;true&quot;</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  async</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> verify</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">payload</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> RequestPayload</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">VerifiedPayload</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt; \{</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> \{ </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">address</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> payload;</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> valid </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> amount </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span> </span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> \{</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">._options.contractAddress.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">length</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> &gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) \{</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        amount </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getTokenBalance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(address, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">._options.contractAddress, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">._options.decimalNumber, payload);</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> \{</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        amount </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getEthBalance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(address, payload);</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      }</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (e) \{</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> \{</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        valid: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        error: [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">._options.error],</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      };</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">finally</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> \{</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      valid </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> amount </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&gt;=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">._options.threshold;</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> \{</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      valid,</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      record: valid</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        ?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> \{</span></span>
<span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">            // store the address into the proof records</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            address,</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">._options.recordAttribute]: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`$</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\{</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">this._options.threshold}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">          }</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        :</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> \{},</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    };</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre><div class="_opacity-0 _transition [div:hover&gt;&amp;]:_opacity-100 focus-within:_opacity-100 _flex _gap-1 _absolute _right-4 _top-2"><button class="_transition _border _border-gray-300 dark:_border-neutral-700 contrast-more:_border-gray-900 contrast-more:dark:_border-gray-50 _rounded-md _p-1.5 md:_hidden" title="Toggle word wrap" type="button" data-headlessui-state=""><svg viewBox="0 0 24 24" fill="currentColor" height="16"><path d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button class="_transition _border _border-gray-300 dark:_border-neutral-700 contrast-more:_border-gray-900 contrast-more:dark:_border-gray-50 _rounded-md _p-1.5" title="Copy code" type="button" data-headlessui-state=""><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" height="16" class="nextra-copy-icon"><rect x="9" y="9" width="13" height="13" rx="2"></rect><path d="M5 15H4C2.89543 15 2 14.1046 2 13V4C2 2.89543 2.89543 2 4 2H13C14.1046 2 15 2.89543 15 4V5"></path></svg></button></div></div>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">There is a lot going on in this file, but we can break it down to make it easier to digest. The first thing to notice is that this contract requires information from the Ethereum blockchain, which requires access to a node or an RPC (<a class="nextra-focus _text-primary-600 _underline hover:_no-underline _decoration-from-font [text-underline-position:from-font]" href="https://www.ibm.com/docs/en/aix/7.1?topic=concepts-remote-procedure-call" target="_blank" rel="noreferrer">remote procedure call</a>) provider - these enable requests to be made to Ethereum, roughly equivalent to getting access to an API server in the Web2 world. In the code above, the following line instantiates an RPC provider.</p>
<div class="nextra-code _relative [&amp;:not(:first-child)]:_mt-6"><pre class="nextra-focus _overflow-x-auto _subpixel-antialiased _text-[.9em] _bg-white dark:_bg-black _py-4 _ring-1 _ring-inset _ring-gray-300 dark:_ring-neutral-700 contrast-more:_ring-gray-900 contrast-more:dark:_ring-gray-50 contrast-more:_contrast-150 _rounded-md" tabindex="0"><code class="nextra-code" dir="ltr"><span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// set the network rpc url based on env</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> RPC_URL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> process.env.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">RPC_URL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span></code></pre><div class="_opacity-0 _transition [div:hover&gt;&amp;]:_opacity-100 focus-within:_opacity-100 _flex _gap-1 _absolute _right-4 _top-2"><button class="_transition _border _border-gray-300 dark:_border-neutral-700 contrast-more:_border-gray-900 contrast-more:dark:_border-gray-50 _rounded-md _p-1.5 md:_hidden" title="Toggle word wrap" type="button" data-headlessui-state=""><svg viewBox="0 0 24 24" fill="currentColor" height="16"><path d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button class="_transition _border _border-gray-300 dark:_border-neutral-700 contrast-more:_border-gray-900 contrast-more:dark:_border-gray-50 _rounded-md _p-1.5" title="Copy code" type="button" data-headlessui-state=""><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" height="16" class="nextra-copy-icon"><rect x="9" y="9" width="13" height="13" rx="2"></rect><path d="M5 15H4C2.89543 15 2 14.1046 2 13V4C2 2.89543 2.89543 2 4 2H13C14.1046 2 15 2.89543 15 4V5"></path></svg></button></div></div>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">This grabs an RPC endpoint from the environment variables. You can set this to your own node’s RPC or use a third party RPC service. Either way, this is your code’s entry point to the Ethereum network. This step is common to any verification method that relies on Ethereum blockchain data.</p>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">Next there are two function definitions: <code class="nextra-code" dir="ltr">getEthBalance()</code> and <code class="nextra-code" dir="ltr">getTokenBalance()</code>. The <code class="nextra-code" dir="ltr">getEthBalance()</code> function calls the <code class="nextra-code" dir="ltr">getBalance()</code> function, which is part of the standard <a class="nextra-focus _text-primary-600 _underline hover:_no-underline _decoration-from-font [text-underline-position:from-font]" href="https://ethereum.org/en/developers/docs/apis/json-rpc/" target="_blank" rel="noreferrer">Ethereum JSON-RPC API</a>, passing the user’s address. The amount of ETH they own is returned. </p>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">The <code class="nextra-code" dir="ltr">getTokenBalance()</code> function is slightly more complicated because it interacts with a smart contract rather than using the result of a JSON-RPC API request directly. Instead of token accounts and balances being stored directly in Ethereum’s state trie, they are stored in the contract’s storage. The values are accessed using contract functions, rather than using the JSON-RPC API directly.</p>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">The ERC-20 token contract includes a function <code class="nextra-code" dir="ltr">balanceOf()</code> that returns the token balance for a given address. This function is common to all contracts that conform to the ERC-20 token standard. It is also necessary to specify which specific token you are interested, by providing the contract address. This is why <code class="nextra-code" dir="ltr">getEthBalance()</code> only takes the user address as an argument, whereas <code class="nextra-code" dir="ltr">getTokenBalance()</code> also takes a contract address (and a decimal number which is used to ensure the correct precision for token balances). </p>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">Both functions take a <a class="nextra-focus _text-primary-600 _underline hover:_no-underline _decoration-from-font [text-underline-position:from-font]" href="https://github.com/passportxyz/passport/blob/9ece5cd399851ccd5a9b76447ad47667181faf6f/types/src/index.d.ts" target="_blank" rel="noreferrer"><code class="nextra-code" dir="ltr">requestPayload</code></a> argument that is used to pass user-defined values from the client into the verification logic. </p>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7"><em><strong>Every Stamp has to have a <code class="nextra-code" dir="ltr">verify()</code> function</strong></em> that returns a boolean (true/false) indicating whether or not the verification was successful and some proof details. In this example, the <code class="nextra-code" dir="ltr">verify()</code> function is quite simple. It checks whether a contract address has been provided. If so, it calls <code class="nextra-code" dir="ltr">getTokenBalance()</code> and assigns the return value to <code class="nextra-code" dir="ltr">amount</code>. If no contract address was provided, it calls  <code class="nextra-code" dir="ltr">getEthBalance()</code>instead and assigns that return value to <code class="nextra-code" dir="ltr">amount</code>.  The value of <code class="nextra-code" dir="ltr">amount</code> is then compared to the user-defined threshold. If <code class="nextra-code" dir="ltr">amount</code> exceeds the threshold then the verification is successful, <code class="nextra-code" dir="ltr">valid</code> is set to <code class="nextra-code" dir="ltr">true</code> and <code class="nextra-code" dir="ltr">verify()</code> returns the user address along with some basic details about the verification (name and threshold value). Otherwise, <code class="nextra-code" dir="ltr">verify()</code> returns an empty object.</p>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7"><em><strong>For a new Stamp, you will need to extend the logic explained here to your precise use case.</strong></em> For EVM Stamps you will likely have some specific contract to call that may or may not conform to the ERC-20 standard. For non-EVM Stamps you probably want to make API calls to some server for verification information instead of interacting with Ethereum. You can browse the verification logic for all the existing EVM and non-EVM Stamps on the <a class="nextra-focus _text-primary-600 _underline hover:_no-underline _decoration-from-font [text-underline-position:from-font]" href="/stamps/integrating-a-new-stamp">Passport Github repository</a>.</p>
<h4 id="__tests__exampletestts" class="_font-semibold _tracking-tight _text-slate-900 dark:_text-slate-100 _mt-8 _text-xl"><code class="nextra-code" dir="ltr">__tests__/example.test.ts</code><a href="#__tests__exampletestts" class="nextra-focus subheading-anchor" aria-label="Permalink for this section"></a></h4>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">This is where you will add tests for your verification logic. Precisely how the tests are organized is up to you, as the tests will be specific to the individual Stamp. A standard pattern is to mock endpoints that return a range of responses that could be expected from your real external server and design tests to ensure your verification logic handles them all well. You should mock all possible responses to ensure complete test coverage.</p>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">As an example, see the tests for the <a class="nextra-focus _text-primary-600 _underline hover:_no-underline _decoration-from-font [text-underline-position:from-font]" href="https://github.com/passportxyz/passport/blob/main/platforms/src/ETH/__tests__/ethTransactions.test.ts" target="_blank" rel="noreferrer">ETH transaction credential</a>.</p>
<h3 id="3-update-existing-files" class="_font-semibold _tracking-tight _text-slate-900 dark:_text-slate-100 _mt-8 _text-2xl">3. Update existing files<a href="#3-update-existing-files" class="nextra-focus subheading-anchor" aria-label="Permalink for this section"></a></h3>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">You have now created all the new files you need to create a new Stamp. The remaining steps all focus on pulling the new information you created into the existing Passport infrastructure, so that Passport can recognize and handle your new Stamp.</p>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">You will need to navigate up a level, out of your newly created files and into <code class="nextra-code" dir="ltr">platforms/src</code> to find the relevant files to update.</p>
<h4 id="platformsts" class="_font-semibold _tracking-tight _text-slate-900 dark:_text-slate-100 _mt-8 _text-xl"><code class="nextra-code" dir="ltr">platforms.ts</code><a href="#platformsts" class="nextra-focus subheading-anchor" aria-label="Permalink for this section"></a></h4>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">First, you will need to import the newly created platforms from the folders you just created, and export the instances from a single central location. <code class="nextra-code" dir="ltr">platforms/src/platforms.ts</code> acts as that central location. This file already contains the relevant code for the existing platforms, so you just need to follow the syntax for adding your own. The code snippet below shows what code you need to add. Just bear in mind that many lines of code referring to existing platforms have been removed from this example for clarity - your real file will have much more code in it!</p>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">Remember to replace <code class="nextra-code" dir="ltr">EXAMPLE</code> with your platform name!</p>
<div class="nextra-code _relative [&amp;:not(:first-child)]:_mt-6"><pre class="nextra-focus _overflow-x-auto _subpixel-antialiased _text-[.9em] _bg-white dark:_bg-black _py-4 _ring-1 _ring-inset _ring-gray-300 dark:_ring-neutral-700 contrast-more:_ring-gray-900 contrast-more:dark:_ring-gray-50 contrast-more:_contrast-150 _rounded-md" tabindex="0"><code class="nextra-code" dir="ltr"><span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">//platforms.ts</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">...</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> Twitter </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> &quot;./Twitter&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> Ens </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> &quot;./Ens&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> *</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> as &lt;EXAMPLE&gt; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> &quot;./&lt;EXAMPLE&gt;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span> </span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">...</span></span>
<span> </span>
<span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// Order of this array determines order in the Passport UI</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> platforms</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Record</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">PlatformConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> \{</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  Twitter,</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  Ens,</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  &lt;EXAMPLE&gt;,</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  ...</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">};</span></span>
<span> </span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> platforms;</span></span></code></pre><div class="_opacity-0 _transition [div:hover&gt;&amp;]:_opacity-100 focus-within:_opacity-100 _flex _gap-1 _absolute _right-4 _top-2"><button class="_transition _border _border-gray-300 dark:_border-neutral-700 contrast-more:_border-gray-900 contrast-more:dark:_border-gray-50 _rounded-md _p-1.5 md:_hidden" title="Toggle word wrap" type="button" data-headlessui-state=""><svg viewBox="0 0 24 24" fill="currentColor" height="16"><path d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button class="_transition _border _border-gray-300 dark:_border-neutral-700 contrast-more:_border-gray-900 contrast-more:dark:_border-gray-50 _rounded-md _p-1.5" title="Copy code" type="button" data-headlessui-state=""><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" height="16" class="nextra-copy-icon"><rect x="9" y="9" width="13" height="13" rx="2"></rect><path d="M5 15H4C2.89543 15 2 14.1046 2 13V4C2 2.89543 2.89543 2 4 2H13C14.1046 2 15 2.89543 15 4V5"></path></svg></button></div></div>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">Next navigate into <code class="nextra-code" dir="ltr">types</code>. The file you need to update is <code class="nextra-code" dir="ltr">types/src/index.d.ts</code>. You will add the new Stamp’s Platform ID and Provider ID to the bottom of their respective union types (<code class="nextra-code" dir="ltr">PLATFORM_ID</code> and <code class="nextra-code" dir="ltr">PROVIDER_ID</code>).</p>
<div class="nextra-code _relative [&amp;:not(:first-child)]:_mt-6"><pre class="nextra-focus _overflow-x-auto _subpixel-antialiased _text-[.9em] _bg-white dark:_bg-black _py-4 _ring-1 _ring-inset _ring-gray-300 dark:_ring-neutral-700 contrast-more:_ring-gray-900 contrast-more:dark:_ring-gray-50 contrast-more:_contrast-150 _rounded-md" tabindex="0"><code class="nextra-code" dir="ltr"><span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">//index.d.ts</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> type</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> PLATFORM_ID</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> &quot;Google&quot;</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> &quot;Ens&quot;</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">...</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> &quot;&lt;EXAMPLE&gt;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> type</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> PROVIDER_ID</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> &quot;Twitter&quot;</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> &quot;TwitterTweetGT10&quot;</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">...</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> &quot;&lt;EXAMPLE&gt;&quot;</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> &quot;&lt;EXAMPLE&gt;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span></code></pre><div class="_opacity-0 _transition [div:hover&gt;&amp;]:_opacity-100 focus-within:_opacity-100 _flex _gap-1 _absolute _right-4 _top-2"><button class="_transition _border _border-gray-300 dark:_border-neutral-700 contrast-more:_border-gray-900 contrast-more:dark:_border-gray-50 _rounded-md _p-1.5 md:_hidden" title="Toggle word wrap" type="button" data-headlessui-state=""><svg viewBox="0 0 24 24" fill="currentColor" height="16"><path d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button class="_transition _border _border-gray-300 dark:_border-neutral-700 contrast-more:_border-gray-900 contrast-more:dark:_border-gray-50 _rounded-md _p-1.5" title="Copy code" type="button" data-headlessui-state=""><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" height="16" class="nextra-copy-icon"><rect x="9" y="9" width="13" height="13" rx="2"></rect><path d="M5 15H4C2.89543 15 2 14.1046 2 13V4C2 2.89543 2.89543 2 4 2H13C14.1046 2 15 2.89543 15 4V5"></path></svg></button></div></div>
<h4 id="appcontextceramiccontexttsx" class="_font-semibold _tracking-tight _text-slate-900 dark:_text-slate-100 _mt-8 _text-xl"><code class="nextra-code" dir="ltr">app/context/ceramicContext.tsx</code><a href="#appcontextceramiccontexttsx" class="nextra-focus subheading-anchor" aria-label="Permalink for this section"></a></h4>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">In this file you will import the Stamp from <code class="nextra-code" dir="ltr">@gitcoin/passport-platforms</code> again. Then create and add the Stamp to the platforms map by adding it to the bottom of the existing list of platforms.</p>
<div class="nextra-code _relative [&amp;:not(:first-child)]:_mt-6"><pre class="nextra-focus _overflow-x-auto _subpixel-antialiased _text-[.9em] _bg-white dark:_bg-black _py-4 _ring-1 _ring-inset _ring-gray-300 dark:_ring-neutral-700 contrast-more:_ring-gray-900 contrast-more:dark:_ring-gray-50 contrast-more:_contrast-150 _rounded-md" tabindex="0"><code class="nextra-code" dir="ltr"><span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">//ceramicContext.tsx</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">...</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> \{</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">Brightid,</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">Coinbase,</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">...,</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;EXAMPLE&gt;,</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">} = stampPlatforms;</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">export const platforms = new Map&lt;PLATFORM_ID, PlatformProps&gt;();</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">...</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">platforms.set(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">&quot;&lt;EXAMPLE&gt;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, \{</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">platform: new &lt;EXAMPLE&gt;.&lt;EXAMPLE&gt;Platform() \,</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">platformGroupSpec: &lt;EXAMPLE&gt;.ProviderConfig,</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">});</span></span></code></pre><div class="_opacity-0 _transition [div:hover&gt;&amp;]:_opacity-100 focus-within:_opacity-100 _flex _gap-1 _absolute _right-4 _top-2"><button class="_transition _border _border-gray-300 dark:_border-neutral-700 contrast-more:_border-gray-900 contrast-more:dark:_border-gray-50 _rounded-md _p-1.5 md:_hidden" title="Toggle word wrap" type="button" data-headlessui-state=""><svg viewBox="0 0 24 24" fill="currentColor" height="16"><path d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button class="_transition _border _border-gray-300 dark:_border-neutral-700 contrast-more:_border-gray-900 contrast-more:dark:_border-gray-50 _rounded-md _p-1.5" title="Copy code" type="button" data-headlessui-state=""><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" height="16" class="nextra-copy-icon"><rect x="9" y="9" width="13" height="13" rx="2"></rect><path d="M5 15H4C2.89543 15 2 14.1046 2 13V4C2 2.89543 2.89543 2 4 2H13C14.1046 2 15 2.89543 15 4V5"></path></svg></button></div></div>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">The final thing to do in the <code class="nextra-code" dir="ltr">app</code> package is to save a copy of your Stamp’s icon, in <code class="nextra-code" dir="ltr">.svg</code> format, to the <code class="nextra-code" dir="ltr">app/public/assets</code> directory.</p>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">The rest of the files only need to be updated <strong>if your app has new environment variables</strong> that need to be added to the infrastructure, app or <code class="nextra-code" dir="ltr">iam</code> packages. If, for example, your Stamp can be verified using the Etherscan or Alchemy keys that are already made available through Passport, then you can skip straight past these updates.</p>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">The next few files to update live in the <code class="nextra-code" dir="ltr">app</code> package:</p>
<h4 id="env-exampleenv" class="_font-semibold _tracking-tight _text-slate-900 dark:_text-slate-100 _mt-8 _text-xl"><code class="nextra-code" dir="ltr">.env-example.env</code><a href="#env-exampleenv" class="nextra-focus subheading-anchor" aria-label="Permalink for this section"></a></h4>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">First, add the new Stamp’s client ID, callback URL and any other environment variables that are necessary for your new Stamp to <code class="nextra-code" dir="ltr">.env-example.env</code>. This is an example file that contains dummy variables to avoid exposing sensitive data on the public Github repository. <strong>Please DO NOT add any real values to .env-example.env</strong> or they will be exposed publicly! Add the relevant fields for your new Stamp and then add DUMMY values that are not the same as your real values!</p>
<div class="nextra-code _relative [&amp;:not(:first-child)]:_mt-6"><pre class="nextra-focus _overflow-x-auto _subpixel-antialiased _text-[.9em] _bg-white dark:_bg-black _py-4 _ring-1 _ring-inset _ring-gray-300 dark:_ring-neutral-700 contrast-more:_ring-gray-900 contrast-more:dark:_ring-gray-50 contrast-more:_contrast-150 _rounded-md" tabindex="0"><code class="nextra-code" dir="ltr"><span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">NEXT_PUBLIC_PASSPORT_</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">EXAMPLE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">_CLIENT_ID</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">EXAMPLE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">DUMMY_CLIENT</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">_ID</span></span>
<span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">NEXT_PUBLIC_PASSPORT_</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">EXAMPLE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">_CALLBACK</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">http</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">//localhost:300</span></span>
<span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">/</span></span></code></pre><div class="_opacity-0 _transition [div:hover&gt;&amp;]:_opacity-100 focus-within:_opacity-100 _flex _gap-1 _absolute _right-4 _top-2"><button class="_transition _border _border-gray-300 dark:_border-neutral-700 contrast-more:_border-gray-900 contrast-more:dark:_border-gray-50 _rounded-md _p-1.5 md:_hidden" title="Toggle word wrap" type="button" data-headlessui-state=""><svg viewBox="0 0 24 24" fill="currentColor" height="16"><path d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button class="_transition _border _border-gray-300 dark:_border-neutral-700 contrast-more:_border-gray-900 contrast-more:dark:_border-gray-50 _rounded-md _p-1.5" title="Copy code" type="button" data-headlessui-state=""><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" height="16" class="nextra-copy-icon"><rect x="9" y="9" width="13" height="13" rx="2"></rect><path d="M5 15H4C2.89543 15 2 14.1046 2 13V4C2 2.89543 2.89543 2 4 2H13C14.1046 2 15 2.89543 15 4V5"></path></svg></button></div></div>
<h4 id="env" class="_font-semibold _tracking-tight _text-slate-900 dark:_text-slate-100 _mt-8 _text-xl"><code class="nextra-code" dir="ltr">.env</code><a href="#env" class="nextra-focus subheading-anchor" aria-label="Permalink for this section"></a></h4>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">Now add the <strong>real</strong> values for your Stamp’s environment variables to your local <code class="nextra-code" dir="ltr">.env</code> file.</p>
<div class="nextra-code _relative [&amp;:not(:first-child)]:_mt-6"><pre class="nextra-focus _overflow-x-auto _subpixel-antialiased _text-[.9em] _bg-white dark:_bg-black _py-4 _ring-1 _ring-inset _ring-gray-300 dark:_ring-neutral-700 contrast-more:_ring-gray-900 contrast-more:dark:_ring-gray-50 contrast-more:_contrast-150 _rounded-md" tabindex="0"><code class="nextra-code" dir="ltr"><span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">NEXT_PUBLIC_PASSPORT_</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">STAMP_PLATFORM_NAME</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">_CLIENT_ID</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">EXAMPLE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;_CLIENT</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">_ID</span></span>
<span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">NEXT_PUBLIC_PASSPORT_</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">EXAMPLE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">_CALLBACK</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">http</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">//localhost:300</span></span>
<span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">/</span></span></code></pre><div class="_opacity-0 _transition [div:hover&gt;&amp;]:_opacity-100 focus-within:_opacity-100 _flex _gap-1 _absolute _right-4 _top-2"><button class="_transition _border _border-gray-300 dark:_border-neutral-700 contrast-more:_border-gray-900 contrast-more:dark:_border-gray-50 _rounded-md _p-1.5 md:_hidden" title="Toggle word wrap" type="button" data-headlessui-state=""><svg viewBox="0 0 24 24" fill="currentColor" height="16"><path d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button class="_transition _border _border-gray-300 dark:_border-neutral-700 contrast-more:_border-gray-900 contrast-more:dark:_border-gray-50 _rounded-md _p-1.5" title="Copy code" type="button" data-headlessui-state=""><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" height="16" class="nextra-copy-icon"><rect x="9" y="9" width="13" height="13" rx="2"></rect><path d="M5 15H4C2.89543 15 2 14.1046 2 13V4C2 2.89543 2.89543 2 4 2H13C14.1046 2 15 2.89543 15 4V5"></path></svg></button></div></div>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">Net we will update some files in the <code class="nextra-code" dir="ltr">iam</code> package. This is where the IAM authority is configured which is responsible for issuing <code class="nextra-code" dir="ltr">verifiableCredentials</code>. These verifiable credentials are issued based on a successful response from the <code class="nextra-code" dir="ltr">verify()</code> function for each Stamp. You defined your verification logic in a <code class="nextra-code" dir="ltr">verify()</code> function in <a class="nextra-focus _text-primary-600 _underline hover:_no-underline _decoration-from-font [text-underline-position:from-font]" href="#providers-example.ts">this earlier step</a>.</p>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">All you need to do in the <code class="nextra-code" dir="ltr">iam</code> package is update the environment variables so that the necessary data for your Stamp is available. In the next section we will configure the <code class="nextra-code" dir="ltr">infra</code> package so that these environment variables, and those created earlier, are instantiated and provided as context to a remote server responsible for doing the actual Stamp issuance.</p>
<h4 id="iamenv-exampleenv" class="_font-semibold _tracking-tight _text-slate-900 dark:_text-slate-100 _mt-8 _text-xl"><code class="nextra-code" dir="ltr">iam/.env-example.env</code><a href="#iamenv-exampleenv" class="nextra-focus subheading-anchor" aria-label="Permalink for this section"></a></h4>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">Add your <strong>dummy</strong> environment variables to <code class="nextra-code" dir="ltr">.env-example.env</code>.</p>
<div class="nextra-code _relative [&amp;:not(:first-child)]:_mt-6"><pre class="nextra-focus _overflow-x-auto _subpixel-antialiased _text-[.9em] _bg-white dark:_bg-black _py-4 _ring-1 _ring-inset _ring-gray-300 dark:_ring-neutral-700 contrast-more:_ring-gray-900 contrast-more:dark:_ring-gray-50 contrast-more:_contrast-150 _rounded-md" tabindex="0"><code class="nextra-code" dir="ltr"><span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">EXAMPLE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;_CLIENT_ID</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">EXAMPLE_CLIENT_ID</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">EXAMPLE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;_CLIENT_SECRET</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">EXAMPLE_CLIENT_SECRET</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">EXAMPLE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;_CALLBACK</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">http</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">//localhost:3000/</span></span></code></pre><div class="_opacity-0 _transition [div:hover&gt;&amp;]:_opacity-100 focus-within:_opacity-100 _flex _gap-1 _absolute _right-4 _top-2"><button class="_transition _border _border-gray-300 dark:_border-neutral-700 contrast-more:_border-gray-900 contrast-more:dark:_border-gray-50 _rounded-md _p-1.5 md:_hidden" title="Toggle word wrap" type="button" data-headlessui-state=""><svg viewBox="0 0 24 24" fill="currentColor" height="16"><path d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button class="_transition _border _border-gray-300 dark:_border-neutral-700 contrast-more:_border-gray-900 contrast-more:dark:_border-gray-50 _rounded-md _p-1.5" title="Copy code" type="button" data-headlessui-state=""><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" height="16" class="nextra-copy-icon"><rect x="9" y="9" width="13" height="13" rx="2"></rect><path d="M5 15H4C2.89543 15 2 14.1046 2 13V4C2 2.89543 2.89543 2 4 2H13C14.1046 2 15 2.89543 15 4V5"></path></svg></button></div></div>
<h4 id="iamenv" class="_font-semibold _tracking-tight _text-slate-900 dark:_text-slate-100 _mt-8 _text-xl"><code class="nextra-code" dir="ltr">iam/.env</code><a href="#iamenv" class="nextra-focus subheading-anchor" aria-label="Permalink for this section"></a></h4>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">Add your <strong>real</strong> environment variables to <code class="nextra-code" dir="ltr">.env</code>.</p>
<div class="nextra-code _relative [&amp;:not(:first-child)]:_mt-6"><pre class="nextra-focus _overflow-x-auto _subpixel-antialiased _text-[.9em] _bg-white dark:_bg-black _py-4 _ring-1 _ring-inset _ring-gray-300 dark:_ring-neutral-700 contrast-more:_ring-gray-900 contrast-more:dark:_ring-gray-50 contrast-more:_contrast-150 _rounded-md" tabindex="0"><code class="nextra-code" dir="ltr"><span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">EXAMPLE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;_CLIENT_ID</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">123456abcdef</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">EXAMPLE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;_CLIENT_SECRET</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">123456abcdef</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">EXAMPLE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;_CALLBACK</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">http</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">//localhost:3000/</span></span></code></pre><div class="_opacity-0 _transition [div:hover&gt;&amp;]:_opacity-100 focus-within:_opacity-100 _flex _gap-1 _absolute _right-4 _top-2"><button class="_transition _border _border-gray-300 dark:_border-neutral-700 contrast-more:_border-gray-900 contrast-more:dark:_border-gray-50 _rounded-md _p-1.5 md:_hidden" title="Toggle word wrap" type="button" data-headlessui-state=""><svg viewBox="0 0 24 24" fill="currentColor" height="16"><path d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button class="_transition _border _border-gray-300 dark:_border-neutral-700 contrast-more:_border-gray-900 contrast-more:dark:_border-gray-50 _rounded-md _p-1.5" title="Copy code" type="button" data-headlessui-state=""><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" height="16" class="nextra-copy-icon"><rect x="9" y="9" width="13" height="13" rx="2"></rect><path d="M5 15H4C2.89543 15 2 14.1046 2 13V4C2 2.89543 2.89543 2 4 2H13C14.1046 2 15 2.89543 15 4V5"></path></svg></button></div></div>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">Now we can leave the <code class="nextra-code" dir="ltr">iam</code> package and update a few files in the <code class="nextra-code" dir="ltr">infra</code> package. This is where we configure the remote server to issue Stamps based on your Stamp details and verification logic.</p>
<h4 id="infrareviewindexts" class="_font-semibold _tracking-tight _text-slate-900 dark:_text-slate-100 _mt-8 _text-xl"><code class="nextra-code" dir="ltr">infra/review/index.ts</code><a href="#infrareviewindexts" class="nextra-focus subheading-anchor" aria-label="Permalink for this section"></a></h4>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">Here you will add secrets objects for each of the environment variables you added to your <code class="nextra-code" dir="ltr">.env</code> files. This allows your secrets to be transmitted securely to the remote server so your Stamp verification logic can be executed without having to expose any keys or other sensitive information on the public repository.</p>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">In this file you will find an instance of the <code class="nextra-code" dir="ltr">Fargate</code> service assigned to the variable <code class="nextra-code" dir="ltr">service</code> . In there, you will find an array named <code class="nextra-code" dir="ltr">secrets</code> nested inside several other objects. You need to add a <code class="nextra-code" dir="ltr">secrets</code> object to this array for each of your environment variables.</p>
<div class="nextra-code _relative [&amp;:not(:first-child)]:_mt-6"><pre class="nextra-focus _overflow-x-auto _subpixel-antialiased _text-[.9em] _bg-white dark:_bg-black _py-4 _ring-1 _ring-inset _ring-gray-300 dark:_ring-neutral-700 contrast-more:_ring-gray-900 contrast-more:dark:_ring-gray-50 contrast-more:_contrast-150 _rounded-md" tabindex="0"><code class="nextra-code" dir="ltr"><span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">//index.ts</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> service</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> awsx.ecs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">FargateService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">&quot;dpopp-iam&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, \{</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  cluster,</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  ...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  taskDefinitionArgs: \{</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    containers: \{</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      iam: \{</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      ...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      secrets: [</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        \{</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">          name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">&quot; &lt;EXAMPLE&gt;_CLIENT_ID &quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">          valueFrom:</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">          `$</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\{</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">IAM_SERVER_SSM_ARN}: &lt;EXAMPLE&gt;_CLIENT_ID:: `</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        },</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        \{</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">          name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">&quot; &lt;EXAMPLE&gt;_CLIENT_SECRET &quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">          valueFrom:</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">          `$</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\{</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">IAM_SERVER_SSM_ARN}: &lt;EXAMPLE&gt;_CLIENT_SECRET:: `</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        },</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        \{</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">          name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">&quot; &lt;EXAMPLE&gt;_CALLBACK &quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">          valueFrom:</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">          `$</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">\{</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">IAM_SERVER_SSM_ARN}: &lt;EXAMPLE&gt;_CALLBACK:: `</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        },</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      ],</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">});</span></span></code></pre><div class="_opacity-0 _transition [div:hover&gt;&amp;]:_opacity-100 focus-within:_opacity-100 _flex _gap-1 _absolute _right-4 _top-2"><button class="_transition _border _border-gray-300 dark:_border-neutral-700 contrast-more:_border-gray-900 contrast-more:dark:_border-gray-50 _rounded-md _p-1.5 md:_hidden" title="Toggle word wrap" type="button" data-headlessui-state=""><svg viewBox="0 0 24 24" fill="currentColor" height="16"><path d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button class="_transition _border _border-gray-300 dark:_border-neutral-700 contrast-more:_border-gray-900 contrast-more:dark:_border-gray-50 _rounded-md _p-1.5" title="Copy code" type="button" data-headlessui-state=""><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" height="16" class="nextra-copy-icon"><rect x="9" y="9" width="13" height="13" rx="2"></rect><path d="M5 15H4C2.89543 15 2 14.1046 2 13V4C2 2.89543 2.89543 2 4 2H13C14.1046 2 15 2.89543 15 4V5"></path></svg></button></div></div>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">This step should then be <strong>repeated identically</strong> for the <code class="nextra-code" dir="ltr">staging</code> and <code class="nextra-code" dir="ltr">production</code> versions of this file. To be clear, update <code class="nextra-code" dir="ltr">infra/staging/index.ts</code>and <code class="nextra-code" dir="ltr">infra/production/index.ts</code> in exactly the same way as you just updated <code class="nextra-code" dir="ltr">infra/review/index.ts</code>.</p>
<h3 id="4-further-customization" class="_font-semibold _tracking-tight _text-slate-900 dark:_text-slate-100 _mt-8 _text-2xl">4. Further customization<a href="#4-further-customization" class="nextra-focus subheading-anchor" aria-label="Permalink for this section"></a></h3>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">You may need additional procedures for your Stamp. You can create a procedures folder inside of the Stamp folder to hold any additional verification, auth, etc. you may need. Every Stamp is slightly different and will require different materials in order to function correctly - since the design space is so large, it’s up to you to know what you need for your specific purpose!</p>
<h3 id="5-build-and-run-the-services" class="_font-semibold _tracking-tight _text-slate-900 dark:_text-slate-100 _mt-8 _text-2xl">5. Build and run the services<a href="#5-build-and-run-the-services" class="nextra-focus subheading-anchor" aria-label="Permalink for this section"></a></h3>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">You will need to have <a class="nextra-focus _text-primary-600 _underline hover:_no-underline _decoration-from-font [text-underline-position:from-font]" href="https://nodejs.org/en/download/" target="_blank" rel="noreferrer">Node (v16 LTS)</a>, <a class="nextra-focus _text-primary-600 _underline hover:_no-underline _decoration-from-font [text-underline-position:from-font]" href="https://classic.yarnpkg.com/en/docs/install/" target="_blank" rel="noreferrer">Yarn</a> and <a class="nextra-focus _text-primary-600 _underline hover:_no-underline _decoration-from-font [text-underline-position:from-font]" href="https://git-scm.com/downloads" target="_blank" rel="noreferrer">Git</a> installed in order to follow these steps.</p>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">Now you have updated your local copy of the Human Passport repository, you can build and run it. You can do this by navigating to the top level project directory (<code class="nextra-code" dir="ltr">passport</code>) and running:</p>
<div class="nextra-code _relative [&amp;:not(:first-child)]:_mt-6"><pre class="nextra-focus _overflow-x-auto _subpixel-antialiased _text-[.9em] _bg-white dark:_bg-black _py-4 _ring-1 _ring-inset _ring-gray-300 dark:_ring-neutral-700 contrast-more:_ring-gray-900 contrast-more:dark:_ring-gray-50 contrast-more:_contrast-150 _rounded-md" tabindex="0"><code class="nextra-code" dir="ltr"><span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> --global</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> lerna</span></span>
<span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">lerna</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> init</span></span>
<span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">lerna</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> bootstrap</span></span></code></pre><div class="_opacity-0 _transition [div:hover&gt;&amp;]:_opacity-100 focus-within:_opacity-100 _flex _gap-1 _absolute _right-4 _top-2"><button class="_transition _border _border-gray-300 dark:_border-neutral-700 contrast-more:_border-gray-900 contrast-more:dark:_border-gray-50 _rounded-md _p-1.5 md:_hidden" title="Toggle word wrap" type="button" data-headlessui-state=""><svg viewBox="0 0 24 24" fill="currentColor" height="16"><path d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button class="_transition _border _border-gray-300 dark:_border-neutral-700 contrast-more:_border-gray-900 contrast-more:dark:_border-gray-50 _rounded-md _p-1.5" title="Copy code" type="button" data-headlessui-state=""><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" height="16" class="nextra-copy-icon"><rect x="9" y="9" width="13" height="13" rx="2"></rect><path d="M5 15H4C2.89543 15 2 14.1046 2 13V4C2 2.89543 2.89543 2 4 2H13C14.1046 2 15 2.89543 15 4V5"></path></svg></button></div></div>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">Next, you can start the <code class="nextra-code" dir="ltr">iam</code> app and <code class="nextra-code" dir="ltr">ceramic</code> services concurrently. This step will only work if you have created your environment variables as explained in the previous steps on this page.</p>
<div class="nextra-code _relative [&amp;:not(:first-child)]:_mt-6"><pre class="nextra-focus _overflow-x-auto _subpixel-antialiased _text-[.9em] _bg-white dark:_bg-black _py-4 _ring-1 _ring-inset _ring-gray-300 dark:_ring-neutral-700 contrast-more:_ring-gray-900 contrast-more:dark:_ring-gray-50 contrast-more:_contrast-150 _rounded-md" tabindex="0"><code class="nextra-code" dir="ltr"><span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">yarn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> start</span></span></code></pre><div class="_opacity-0 _transition [div:hover&gt;&amp;]:_opacity-100 focus-within:_opacity-100 _flex _gap-1 _absolute _right-4 _top-2"><button class="_transition _border _border-gray-300 dark:_border-neutral-700 contrast-more:_border-gray-900 contrast-more:dark:_border-gray-50 _rounded-md _p-1.5 md:_hidden" title="Toggle word wrap" type="button" data-headlessui-state=""><svg viewBox="0 0 24 24" fill="currentColor" height="16"><path d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button class="_transition _border _border-gray-300 dark:_border-neutral-700 contrast-more:_border-gray-900 contrast-more:dark:_border-gray-50 _rounded-md _p-1.5" title="Copy code" type="button" data-headlessui-state=""><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" height="16" class="nextra-copy-icon"><rect x="9" y="9" width="13" height="13" rx="2"></rect><path d="M5 15H4C2.89543 15 2 14.1046 2 13V4C2 2.89543 2.89543 2 4 2H13C14.1046 2 15 2.89543 15 4V5"></path></svg></button></div></div>
<h3 id="6-raise-a-pull-request" class="_font-semibold _tracking-tight _text-slate-900 dark:_text-slate-100 _mt-8 _text-2xl">6. Raise a Pull Request<a href="#6-raise-a-pull-request" class="nextra-focus subheading-anchor" aria-label="Permalink for this section"></a></h3>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">Finally, having seen your app running successfully, you can raise a pull request against the Human Passport GitHub repository. This will make the changes you have made to support your app part of the canonical public Stamp repository. However, before this happens your changes will be reviewed by the Human Passport team who may request changes.</p>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">When you raise a pull request, it is important to include the following checklist. This helps you to verify that all the necessary steps have been taken to create your Stamp, and also helps the reviewers of the pull request check your work and merge it faster.</p>
<div class="nextra-code _relative [&amp;:not(:first-child)]:_mt-6"><pre class="nextra-focus _overflow-x-auto _subpixel-antialiased _text-[.9em] _bg-white dark:_bg-black _py-4 _ring-1 _ring-inset _ring-gray-300 dark:_ring-neutral-700 contrast-more:_ring-gray-900 contrast-more:dark:_ring-gray-50 contrast-more:_contrast-150 _rounded-md" tabindex="0"><code class="nextra-code" dir="ltr"><span><span>## Stamp Provider &lt;provider name here&gt;</span></span>
<span><span></span></span>
<span><span>- [ ] The Stamp provider name is globally unique (and should not have been used previously). This is because the provider name will be included in the record used  to create the Stamp hash:</span></span>
<span><span>- [ ] The implementation has been unit tested</span></span>
<span><span>- [ ] Verification payload</span></span>
<span><span>    json</span></span>
<span><span>    valid: true / false,</span></span>
<span><span>    record: \{</span></span>
<span><span>       ... // Unique payload identifying user</span></span>
<span><span>    }</span></span>
<span><span>&lt;strong&gt;- [ ] The attribute `valid` is false if the Stamp verification fails</span></span>
<span><span>&lt;/strong&gt;- [ ] The record must contain the following attributes:</span></span>
<span><span>    - 1 or more attributes uniquely identifying the user:</span></span>
<span><span>        - An ETH address - it should always be lower case (not checksummed)</span></span>
<span><span>        - An email (in case of Google for example)</span></span>
<span><span>        - The users unique ID (like for Facebook, Twitter, Github)        </span></span>
<span><span>- [ ] The payload should never contain a field named `pii`</span></span>
<span><span>    - This field is reserved for internal use</span></span>
<span><span>&lt;/code&gt;&lt;/pre&gt;</span></span></code></pre><div class="_opacity-0 _transition [div:hover&gt;&amp;]:_opacity-100 focus-within:_opacity-100 _flex _gap-1 _absolute _right-4 _top-2"><button class="_transition _border _border-gray-300 dark:_border-neutral-700 contrast-more:_border-gray-900 contrast-more:dark:_border-gray-50 _rounded-md _p-1.5 md:_hidden" title="Toggle word wrap" type="button" data-headlessui-state=""><svg viewBox="0 0 24 24" fill="currentColor" height="16"><path d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button class="_transition _border _border-gray-300 dark:_border-neutral-700 contrast-more:_border-gray-900 contrast-more:dark:_border-gray-50 _rounded-md _p-1.5" title="Copy code" type="button" data-headlessui-state=""><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" height="16" class="nextra-copy-icon"><rect x="9" y="9" width="13" height="13" rx="2"></rect><path d="M5 15H4C2.89543 15 2 14.1046 2 13V4C2 2.89543 2.89543 2 4 2H13C14.1046 2 15 2.89543 15 4V5"></path></svg></button></div></div>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">You can use the code snippet above as a template - copy and paste it into your pull request and tick the boxes to show that each item has been completed.</p>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">The following is an example of a pull request that uses a similar checklist: <a class="nextra-focus _text-primary-600 _underline hover:_no-underline _decoration-from-font [text-underline-position:from-font]" href="https://github.com/passportxyz/passport/issues/1233#top" target="_blank" rel="noreferrer">Integrate Phi Stamp in Passport</a></p>
<h3 id="7-note-on-context-and-cache" class="_font-semibold _tracking-tight _text-slate-900 dark:_text-slate-100 _mt-8 _text-2xl">7. Note on context and cache<a href="#7-note-on-context-and-cache" class="nextra-focus subheading-anchor" aria-label="Permalink for this section"></a></h3>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">It is important to understand the difference between context and cache, and for you to use them appropriately when developing your Stamp. They both refer to holding information in memory. </p>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7"><strong><code class="nextra-code" dir="ltr">Context</code></strong> is used to pass the results of expensive operations performed during the verification process for a specific Stamp between calls to <code class="nextra-code" dir="ltr">verify</code> within each provider. This is the expected way for Stamps to handle their data. </p>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7"><em><code class="nextra-code" dir="ltr">Context</code> should be used wherever possible, in preference to using the <code class="nextra-code" dir="ltr">cache</code>.</em> </p>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">The <code class="nextra-code" dir="ltr">cache</code> exists to support unusual or complex authentication mechanisms that cannot work within the<code class="nextra-code" dir="ltr">context</code> logic. The <strong><code class="nextra-code" dir="ltr">cache</code></strong> is used to store data between multiple HTTP requests, for example if data stored in the <code class="nextra-code" dir="ltr">App-bindings</code> request needs to be referenced in a <code class="nextra-code" dir="ltr">/verify</code> request. This may occur when objects need to be shared across multiple <code class="nextra-code" dir="ltr">Providers</code>. In this case, the caching <em><strong>must</strong></em> be done using the caching mechanism defined in <code class="nextra-code" dir="ltr">platforms/src/utils/cache.ts</code>.</p>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">If the cache is used, its payload should be moved to <code class="nextra-code" dir="ltr">context</code> and then the cache should be explicitly cleared.</p>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">The following example shows the <code class="nextra-code" dir="ltr">cache</code> mechanism being used correctly.  </p>
<div class="nextra-code _relative [&amp;:not(:first-child)]:_mt-6"><pre class="nextra-focus _overflow-x-auto _subpixel-antialiased _text-[.9em] _bg-white dark:_bg-black _py-4 _ring-1 _ring-inset _ring-gray-300 dark:_ring-neutral-700 contrast-more:_ring-gray-900 contrast-more:dark:_ring-gray-50 contrast-more:_contrast-150 _rounded-md" tabindex="0"><code class="nextra-code" dir="ltr"><span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> loadTwitterCache</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">token</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> TwitterCache</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> loadCacheSession</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(token, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">&quot;Twitter&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span> </span>
<span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// retrieve the instantiated Client shared between Providers</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getAuthClient</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">sessionKey</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">code</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">context</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> TwitterContext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">Client</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> \{</span></span>
<span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (!context.twitter?.authClient) \{</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> session</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> loadTwitterCache</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(sessionKey);</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> \{ </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">oauthUser</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> session;</span></span>
<span> </span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">context.twitter) context.twitter </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> \{};</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    context.twitter.authClient </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Client</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(oauthUser);</span></span>
<span> </span>
<span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    clearCacheSession</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(sessionKey, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">&quot;Twitter&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  return context.twitter.authClient;</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">};</span></span></code></pre><div class="_opacity-0 _transition [div:hover&gt;&amp;]:_opacity-100 focus-within:_opacity-100 _flex _gap-1 _absolute _right-4 _top-2"><button class="_transition _border _border-gray-300 dark:_border-neutral-700 contrast-more:_border-gray-900 contrast-more:dark:_border-gray-50 _rounded-md _p-1.5 md:_hidden" title="Toggle word wrap" type="button" data-headlessui-state=""><svg viewBox="0 0 24 24" fill="currentColor" height="16"><path d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button class="_transition _border _border-gray-300 dark:_border-neutral-700 contrast-more:_border-gray-900 contrast-more:dark:_border-gray-50 _rounded-md _p-1.5" title="Copy code" type="button" data-headlessui-state=""><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" height="16" class="nextra-copy-icon"><rect x="9" y="9" width="13" height="13" rx="2"></rect><path d="M5 15H4C2.89543 15 2 14.1046 2 13V4C2 2.89543 2.89543 2 4 2H13C14.1046 2 15 2.89543 15 4V5"></path></svg></button></div></div>
<h3 id="8-see-some-examples" class="_font-semibold _tracking-tight _text-slate-900 dark:_text-slate-100 _mt-8 _text-2xl">8. See some examples<a href="#8-see-some-examples" class="nextra-focus subheading-anchor" aria-label="Permalink for this section"></a></h3>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">It might be helpful to look at some past examples of pull requests that add Stamps to the Human Passport GitHub repository. Browse the examples below to see exactly how others have gone about it:</p>
<ul class="[:is(ol,ul)_&amp;]:_my-3 [&amp;:not(:first-child)]:_mt-6 _list-disc ltr:_ml-6 rtl:_mr-6">
<li class="_my-2"><a class="nextra-focus _text-primary-600 _underline hover:_no-underline _decoration-from-font [text-underline-position:from-font]" href="https://github.com/passportxyz/passport/pull/1298/files" target="_blank" rel="noreferrer">Hypercert Stamp</a></li>
<li class="_my-2"><a class="nextra-focus _text-primary-600 _underline hover:_no-underline _decoration-from-font [text-underline-position:from-font]" href="https://github.com/passportxyz/passport/pull/1224/files" target="_blank" rel="noreferrer">Guildxyz Stamp</a></li>
<li class="_my-2"><a class="nextra-focus _text-primary-600 _underline hover:_no-underline _decoration-from-font [text-underline-position:from-font]" href="https://github.com/passportxyz/passport/pull/1049/files" target="_blank" rel="noreferrer">Coinbase Stamp</a></li>
<li class="_my-2"><a class="nextra-focus _text-primary-600 _underline hover:_no-underline _decoration-from-font [text-underline-position:from-font]" href="https://github.com/passportxyz/passport/pull/1232/files" target="_blank" rel="noreferrer">Phi Stamp</a></li>
</ul>
<p class="[&amp;:not(:first-child)]:_mt-6 _leading-7">You can also ask questions in our <a class="nextra-focus _text-primary-600 _underline hover:_no-underline _decoration-from-font [text-underline-position:from-font]" href="https://t.me/+Mcp9RsRV7tVmYjZh" target="_blank" rel="noreferrer">developer support channel on Telegram</a>.</p><div class="_mt-16"></div></main></article></div><div class="text-sm text-center py-4">2025<!-- --> Human Passport</div></div></div><script id="__NEXT_DATA__" type="application/json" crossorigin="">{"props":{"pageProps":{}},"page":"/stamps/integrating-a-new-stamp","query":{},"buildId":"ovyyKbC8XDk3XIs6f5W7D","nextExport":true,"autoExport":true,"isFallback":false,"scriptLoader":[]}</script></body></html>